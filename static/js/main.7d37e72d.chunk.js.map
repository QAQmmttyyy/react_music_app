{"version":3,"sources":["components/Loading/images/loading-64.svg","components/PlaylistDetail/images/playall.png","context/PlayerContext.js","components/Loading/Loading.jsx","components/Search/Search.jsx","components/Slide/Slide.jsx","components/BannerSlider/BannerSlider.jsx","components/PlaylistCover/PlaylistCover.jsx","components/PlaylistDetail/PlaylistDetail.jsx","components/Home/Home.jsx","components/MiniPlayer/MiniPlayer.jsx","components/Scroll/Scroll.jsx","components/FullPlayer/FullPlayer.jsx","components/PlayingList/PlayingList.jsx","components/Player/Player.jsx","App.jsx","serviceWorker.js","index.js","images/cover-placeholder.png"],"names":["module","exports","__webpack_require__","p","context","React","createContext","Loading","react_default","a","createElement","className","src","LoadImg","alt","Component","Item","list_default","Brief","Search","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","submit","value","setState","showSearchKeywordBox","showSearchResultBox","isLoading","historyKws","state","historyKeywords","cpHistoryKws","length","slice","push","uniqCpHistoryKws","_","uniq","window","localStorage","setItem","JSON","stringify","searchApi","concat","encoded","encodeURI","fetch","method","headers","Accept","mode","then","response","status","json","data","resultData","Body","map","song","author","id","pic","title","link","name","artists","album","picUrl","searchResult","catch","reason","console","log","change","keyword","clear","focus","showSearchBox","cancel","handlePlaySong","ev","funcPlaySong","songIndex","stopPropagation","cloneDeep","handleClickKeyword","val","target","textContent","clearHistoryKeywords","removeItem","hotKeywords","getItem","parse","_this2","_this$state","PlayerContext","Consumer","_ref","resultContent","playSong","idx","key","activeStyle","backgroundColor","onClick","multipleLine","join","style","height","textAlign","search_bar_default","ref","manualFocusInst","cancelText","placeholder","onSubmit","onChange","onClear","onFocus","onBlur","onCancel","react_transition_group","in","timeout","mountOnEnter","unmountOnExit","kw","components_Loading_Loading","Slide","update","slide","destroy","init","refresh","_setSlideWidth","prev","next","clearTimeout","timer","currentPageIndex","showDot","_initDots","_initSlide","autoPlay","_play","isResize","children","slideGroupRef","current","width","slideWidth","slideRef","clientWidth","i","child","addClass","loop","BScroll","scrollX","scrollY","momentum","snap","threshold","speed","bounce","click","on","_onScrollEnd","pageIndex","getCurrentPage","pageX","dots","Array","setInterval","interval","hasClass","el","RegExp","test","newClass","split","createRef","addEventListener","enabled","resizeTimer","setTimeout","isInTransition","defaultProps","BannerSlider","banners","components_Slide_Slide","PlaylistCover","_this$props","playCount","PlaylistDetail","getSonglist","plId","songlist","SWrapperRef","funcPlayallOrAddall","transitionClass","playlistIntro","toggleShowPlDetail","coverUrl","playerState","playAll","listContent","artistsTitle","artist","PlaylistDetail_Item","nav_bar_default","icon","icon_default","type","onLeftClick","playingList","paddingBottom","components_PlaylistCover_PlaylistCover","handleClickPlayallOrAddall","PlayIcon","result_default","backgroundImage","Home","prevState","showPlDetail","handleClickPlaylist","elem","currentTarget","hasAttribute","index","getAttribute","clickedPl","rcmdPlaylists","playlists","getPlaylists","plsUrl","process","homeLink","curPage","rcmdlist","playlist","data-index","data-plcate","position","top","left","allPlContent","Home_Item","thumb","Home_Brief","Fragment","components_Search_Search","components_BannerSlider_BannerSlider","renderHeader","components_PlaylistDetail_PlaylistDetail","MiniPlayer","curSong","isPauseIcon","clickPlayPauseHandler","toggleFullplayer","togglePlayingList","extraContent","contentItem","isEmpty","MiniPlayer_Item","extra","imgSrc","includes","CoverPlaceholder","MiniPlayer_Brief","Scroll","initScroll","scroll","refreshScroll","destroyScroll","scrollToElement","apply","arguments","restProps","objectWithoutProperties","assign","FullPlayer","handleTouchStart","fnPlay","fnPause","isTouching","ProgressBarElem","ProgressBarRef","progressBarOffsetLeft","offsetLeft","touchmoveLeftEdge","touchmoveRightEdge","progressBarWidth","prevTouchX","targetTouches","clientX","ProgressWrapElem","ProgressWrapRef","handleTouchEnd","bind","assertThisInitialized","handleTouchMove","nextTouchX","touches","deltaX","nextProgress","progress","updateCurrentTime","handleClickLyric","showCover","showLyric","handleClickCover","ScrollRef","diffSong","curLyricIndex","curLyricIndexChange","removeEventListener","playState","clickPrevBtnHandler","clickNextBtnHandler","clickModeBtnHandler","duration","curTime","playProgress","lyric","navBarTitleCnt","lyricContent","maxTranslateY","lrcCls","playProgressWidth","parseFloat","play","pause","components_Scroll_Scroll","transform","onTouchStart","PlayingList","document","querySelector","scrollIntoView","playByIndex","deleteSong","clearPlaylist","curSongIndex","extraClearBtn","listItemArr","extraCloseBtn","PlayingList_Item","Player","getLyric","lrcUrl","songId","text","lrcArr","timestampArr","forEach","lrc","matchPart","match","timestampParts","trim","timestamp","parseInt","isNaN","showFullplayer","showPlayingList","playPercentage","audioElem","audioRef","currentTime","modeIndex","audioAmount","isPause","songUrlApi","currentSong","playMode","desc","isNoAudio","paused","pauseAudio","playAudio","funcPlay","funcPause","getIndex","nextIndex","timeFormat","_this$audioRef$curren","nextCurTime","nextPlayProgress","toFixed","nextCurLyricIndex","findLastIndex","loadProgress","error","code","load","timeNum","minutes","seconds","minStr","secStr","isPrev","undefined","Math","random","_this3","_this$state2","curSongId","isToReset","onDurationChange","handleDurationChange","onTimeUpdate","handleTimeUpdate","onEnded","handleEnded","onError","handleAudioError","components_MiniPlayer_MiniPlayer","handleClickPlayPause","onExited","components_FullPlayer_FullPlayer","handleClickPrevBtn","handleClickNextBtn","handleClickModeBtn","changeProgressHandler","handleChangeProgress","afterChangeProgressHandler","handleAfterChangeProgress","components_PlayingList_PlayingList","listData","App","isLogin","addAll","addSongToNext","localData","appState","l_array","remove","songToAdd","differenceBy","splice","toConsumableArray","indexToInsert","matchedSongIdx","findIndex","_this4","Provider","components_Home_Home","components_Player_Player","Boolean","location","hostname","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"6EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,4DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,udCGzBC,EADCC,IAAMC,+HCcPC,mLAVX,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACbH,EAAAC,EAAAC,cAAA,OAAKE,IAAKC,IAASC,IAAI,oBAJTT,IAAMU,WCKtBC,UAAOC,EAAAR,EAAKO,MACZE,EAAQF,EAAKE,MAyTJC,cAtTb,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAoBRQ,OAAS,SAACC,GACR,GAAIA,EAAO,CAGTR,EAAKS,SAAS,CACZC,sBAAsB,EACtBC,qBAAqB,EACrBC,WAAW,IAIb,IAAMC,EAAab,EAAKc,MAAMC,gBAC1BC,EAAe,GACfH,GAAcA,EAAWI,QAC3BD,EAAeH,EAAWK,MAAM,IACnBC,KAAKX,GAElBQ,EAAaG,KAAKX,GAEpB,IAAMY,EAAmBC,IAAEC,KAAKN,GAChCO,OAAOC,aAAaC,QAAQ,kBAAmBC,KAAKC,UAAUP,IAI9D,IAAMQ,EAAS,wDAAAC,OAA2DrB,EAA3D,0BAETsB,EAAUC,UAAUH,GAE1BL,OAAOS,MACLF,EACA,CACEG,OAAQ,MACRC,QAAS,CACPC,OAAU,KAEZC,KAAM,SAERC,KACA,SAAAC,GAEE,OAA2B,MAApBA,EAASC,OAAiBD,EAASE,OAAS,KAErDH,KACA,SAAAI,GAEE,IAAIC,EAAa,GACbD,EAAKE,OAEPD,EAAaD,EAAKE,KAAKC,IAAI,SAAAC,GAAQ,IACzBC,EAA2BD,EAA3BC,OAAQC,EAAmBF,EAAnBE,GAAIC,EAAeH,EAAfG,IAAKC,EAAUJ,EAAVI,MACzB,MAAO,CACLF,GAAIA,EACJG,KAAI,YAAArB,OAAckB,GAClBI,KAAMF,EACNG,QAAS,CAAC,CAACD,KAAML,IACjBO,MAAO,CAACC,OAAQN,OAKtBhD,EAAKS,SAAS,CACZM,gBAAiBK,EACjBmC,aAAcb,EACd9B,WAAW,MAGf4C,MACA,SAAAC,GACEC,QAAQC,IAAIF,GACZzD,EAAKS,SAAS,CACZM,gBAAiBC,EACjBJ,WAAW,QA5FFZ,EAmGnB4D,OAAQ,SAACpD,GACPR,EAAKS,SAAS,CAAEoD,QAASrD,KApGRR,EAuGnB8D,MAAQ,WAEN9D,EAAKS,SAAS,CAAEoD,QAAS,MAzGR7D,EA4GnB+D,MAAQ,WAGN/D,EAAKS,SAAS,CACZuD,eAAe,EACftD,sBAAsB,EACtBC,qBAAqB,EACrBC,WAAW,KAnHIZ,EAuHnBiE,OAAS,WAEPjE,EAAKS,SAAS,CACZoD,QAAS,GACTG,eAAe,EACftD,sBAAsB,EACtBC,qBAAqB,EACrBC,WAAW,KA9HIZ,EAkInBkE,eAAiB,SAACC,EAAIC,EAAcC,GAClCF,EAAGG,kBACHF,EAAa/C,IAAEkD,UAAUvE,EAAKc,MAAMyC,aAAac,MApIhCrE,EAuInBwE,mBAAqB,SAACL,GACpBA,EAAGG,kBAEH,IAAMG,EAAMN,EAAGO,OAAOC,YAEM,SAAxBR,EAAGO,OAAOpF,YACZU,EAAKS,SAAS,CAAEoD,QAASY,IACzBzE,EAAKO,OAAOkE,KA9IGzE,EAkJnB4E,qBAAuB,SAACT,GACtBA,EAAGG,kBACH/C,OAAOC,aAAaqD,WAAW,mBAC/B7E,EAAKS,SAAS,CAAEM,gBAAiB,MAnJjCf,EAAKc,MAAQ,CACX+C,QAAS,GACTiB,YAAa,CAAC,qBAAO,4BAAS,uCAAU,eAAM,2BAAQ,iBAAkB,eAAM,qBAAO,eAAM,gBAC3F/D,gBAAiB,GACjBwC,aAAc,GACdS,eAAe,EACftD,sBAAsB,EACtBC,qBAAqB,EACrBC,WAAW,GAVIZ,mFAejB,IAAMe,EAAkBQ,OAAOC,aAAauD,QAAQ,mBAChDhE,GACFZ,KAAKM,SAAS,CAAEM,gBAAiBW,KAAKsD,MAAMjE,sCAuIvC,IAAAkE,EAAA9E,KAAA+E,EASJ/E,KAAKW,MAPNgE,EAFKI,EAELJ,YACA/D,EAHKmE,EAGLnE,gBACAwC,EAJK2B,EAIL3B,aACAS,EALKkB,EAKLlB,cACAtD,EANKwE,EAMLxE,qBACAC,EAPKuE,EAOLvE,oBACAC,EARKsE,EAQLtE,UAGF,OACEzB,EAAAC,EAAAC,cAAC8F,EAAcC,SAAf,KACG,SAAAC,GAAkB,IACbC,EADFC,EAAeF,EAAfE,SA2BF,OAxBED,EADE/B,GAAgBA,EAAatC,OACfsC,EAAaX,IAAI,SAACC,EAAM2C,GAAQ,IAEtCzC,EAAsBF,EAAtBE,GAAII,EAAkBN,EAAlBM,KAAMC,EAAYP,EAAZO,QAElB,OACEjE,EAAAC,EAAAC,cAACM,EAAD,CACE8F,IAAK1C,EACLzD,UAAU,mBACVoG,YAAa,CAAEC,gBAAiB,QAChCC,QAAS,SAACzB,GAAQc,EAAKf,eAAeC,EAAIoB,EAAUC,IACpDK,cAAY,GAEX1C,EACDhE,EAAAC,EAAAC,cAACQ,EAAD,KAAQuD,EAAQR,IAAI,SAAA6B,GAAG,OAAIA,EAAItB,OAAM2C,KAAK,SAO9C3G,EAAAC,EAAAC,cAAA,OAAK0G,MAAO,CAACC,OAAO,QAAQC,UAAW,WAAvC,8CAKF9G,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA6G,EAAA9G,EAAA,CACE+G,IAAK,SAAAA,GAAG,OAAIlB,EAAKmB,gBAAkBD,GACnC3F,MAAOyE,EAAKnE,MAAM+C,QAClBwC,WAAW,eACXC,YAAY,SACZC,SAAUtB,EAAK1E,OACfiG,SAAUvB,EAAKrB,OACf6C,QAASxB,EAAKnB,MACd4C,QAASzB,EAAKlB,MACd4C,OAAQ,kBAAMjD,QAAQC,IAAI,WAC1BiD,SAAU3B,EAAKhB,SAGhBD,EACC7E,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAEbH,EAAAC,EAAAC,cAACwH,EAAA,WAAD,CACEC,GAAIpG,EACJqG,QAAS,IACTC,cAAY,EACZC,eAAa,GAGZ,SAAC1E,GACA,OACEpD,EAAAC,EAAAC,cAAA,OACEC,UAAS,gCAAAuC,OAAkCU,GAC3CqD,QAAS,SAACzB,GAAD,OAAQc,EAAKT,mBAAmBL,KAEzChF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,SAAd,4BACAH,EAAAC,EAAAC,cAAA,UACGyF,EAAYlC,IAAI,SAACsE,EAAI1B,GAAL,OACfrG,EAAAC,EAAAC,cAAA,MACEoG,IAAKD,EACLlG,UAAU,QAET4H,OAKRnG,EAAgBE,OAAS,EACxB9B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACbH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,SAAd,2BAEEH,EAAAC,EAAAC,cAAA,KACEC,UAAU,aACVsG,QAAS,SAACzB,GAAD,OAAQc,EAAKL,qBAAqBT,OAG/ChF,EAAAC,EAAAC,cAAA,UACG0B,EAAgB6B,IAAI,SAACsE,EAAI1B,GAAL,OACnBrG,EAAAC,EAAAC,cAAA,MACEoG,IAAKD,EACLlG,UAAU,QAET4H,OAKP,QAOZ/H,EAAAC,EAAAC,cAACwH,EAAA,WAAD,CACEC,GAAInG,EACJoG,QAAS,IACTC,cAAY,EACZC,eAAa,GAGZ,SAAC1E,GACA,OACEpD,EAAAC,EAAAC,cAAA,OAAKC,UAAS,+BAAAuC,OAAiCU,IAC5C3B,EACCzB,EAAAC,EAAAC,cAAC8H,EAAD,MAEAhI,EAAAC,EAAAC,cAAAO,EAAAR,EAAA,KAAOkG,OAuBjB,eA5SG5F,qBCPf0H,sBACJ,SAAAA,EAAYrH,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAiH,IACjBpH,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAmH,GAAA9G,KAAAH,KAAMJ,KAmCRsH,OAAS,WACHrH,EAAKsH,OACPtH,EAAKsH,MAAMC,UAEbvH,EAAKwH,QAxCYxH,EA0CnByH,QAAU,WACRzH,EAAK0H,gBAAe,GACpB1H,EAAKsH,MAAMG,WA5CMzH,EA8CnB2H,KAAO,WACL3H,EAAKsH,MAAMK,QA/CM3H,EAiDnB4H,KAAO,WACL5H,EAAKsH,MAAMM,QAlDM5H,EAoDnBwH,KAAO,WACLjG,OAAOsG,aAAa7H,EAAK8H,OACzB9H,EAAKS,SAAS,CAACsH,iBAAkB,IACjC/H,EAAK0H,iBACD1H,EAAKD,MAAMiI,SACbhI,EAAKiI,YAEPjI,EAAKkI,aACDlI,EAAKD,MAAMoI,UACbnI,EAAKoI,SA7DUpI,EAgEnB0H,eAAiB,SAACW,GAChBrI,EAAKsI,SAAWtI,EAAKuI,cAAcC,QAAQF,SAG3C,IAFA,IAAIG,EAAQ,EACRC,EAAa1I,EAAK2I,SAASH,QAAQI,YAC9BC,EAAI,EAAGA,EAAI7I,EAAKsI,SAASrH,OAAQ4H,IAAK,CAC7C,IAAIC,EAAQ9I,EAAKsI,SAASO,GAC1B7I,EAAK+I,SAASD,EAAO,cACrBA,EAAM/C,MAAM0C,MAAQC,EAAa,KACjCD,GAASC,EAEP1I,EAAKD,MAAMiJ,OAASX,IACtBI,GAAS,EAAIC,GAEf1I,EAAKuI,cAAcC,QAAQzC,MAAM0C,MAAQA,EAAQ,MA7EhCzI,EA+EnBkI,WAAa,WAEXlI,EAAKsH,MAAQ,IAAI2B,IAAQjJ,EAAK2I,SAASH,QAAS,CAC9CU,SAAS,EACTC,SAAS,EACTC,UAAU,EACVC,KAAM,CACJL,KAAMhJ,EAAKD,MAAMiJ,KACjBM,UAAWtJ,EAAKD,MAAMuJ,UACtBC,MAAOvJ,EAAKD,MAAMwJ,OAEpBC,QAAQ,EACRlF,iBAAiB,EACjBmF,MAAOzJ,EAAKD,MAAM0J,QAEpBzJ,EAAKsH,MAAMoC,GAAG,YAAa1J,EAAK2J,cAChC3J,EAAKsH,MAAMoC,GAAG,WAAY,WACpB1J,EAAKD,MAAMoI,UACbnI,EAAKoI,UAGTpI,EAAKsH,MAAMoC,GAAG,oBAAqB,WAC7B1J,EAAKD,MAAMoI,UACb5G,OAAOsG,aAAa7H,EAAK8H,UAtGZ9H,EA0GnB2J,aAAe,WACb,IAAIC,EAAY5J,EAAKsH,MAAMuC,iBAAiBC,MAC5C9J,EAAKS,SAAS,CAACsH,iBAAkB6B,IAC7B5J,EAAKmI,UACPnI,EAAKoI,SA9GUpI,EAiHnBiI,UAAY,WAEV,IADA,IAAI8B,EAAO,IAAIC,MAAMhK,EAAKsI,SAASrH,QAC1BuE,EAAM,EAAGA,EAAMuE,EAAK9I,OAAQuE,IACnCuE,EAAKvE,GAAOA,EAEdxF,EAAKS,SAAS,CAACsJ,KAAMA,KAtHJ/J,EAwHnBoI,MAAQ,WACN7G,OAAOsG,aAAa7H,EAAK8H,OACzB9H,EAAK8H,MAAQvG,OAAO0I,YAAY,WAC9BjK,EAAKsH,MAAMM,QACV5H,EAAKD,MAAMmK,WA5HGlK,EA+HnBmK,SAAW,SAACC,EAAI9K,GAEd,OADU,IAAI+K,OAAO,UAAY/K,EAAY,WAClCgL,KAAKF,EAAG9K,YAjIFU,EAoInB+I,SAAW,SAACqB,EAAI9K,GACd,IAAIU,EAAKmK,SAASC,EAAI9K,GAAtB,CAIA,IAAIiL,EAAWH,EAAG9K,UAAUkL,MAAM,KAClCD,EAASpJ,KAAK7B,GACd8K,EAAG9K,UAAYiL,EAASzE,KAAK,OAxI7B9F,EAAKc,MAAQ,CACXiJ,KAAM,GACNhC,iBAAkB,GAEpB/H,EAAK2I,SAAW3J,IAAMyL,YACtBzK,EAAKuI,cAAgBvJ,IAAMyL,YARVzK,mFAWC,IAAAiF,EAAA9E,KAClBA,KAAKkH,SAEL9F,OAAOmJ,iBAAiB,SAAU,WAC3BzF,EAAKqC,OAAUrC,EAAKqC,MAAMqD,UAG/BpJ,OAAOsG,aAAa5C,EAAK2F,aACzB3F,EAAK2F,YAAcrJ,OAAOsJ,WAAW,WAC/B5F,EAAKqC,MAAMwD,eACb7F,EAAK0E,eAED1E,EAAKlF,MAAMoI,UACblD,EAAKmD,QAGTnD,EAAKwC,WACJ,oDAKLlG,OAAOsG,aAAa1H,KAAK2H,wCA6GlB,IAAA5C,EAC4B/E,KAAKW,MAAhCiJ,EADD7E,EACC6E,KAAMhC,EADP7C,EACO6C,iBAEd,OACE5I,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QAAQ6G,IAAKhG,KAAKwI,UAC/BxJ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAAc6G,IAAKhG,KAAKoI,eACpCpI,KAAKJ,MAAMuI,UAEbnI,KAAKJ,MAAMiI,QACV7I,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACZyK,EAAKnH,IAAI,SAAC6B,EAAKe,GAAN,OACRrG,EAAAC,EAAAC,cAAA,QACEoG,IAAKD,EACLlG,UAAS,OAAAuC,OACAkG,IAAqBvC,EAAM,SAAS,SAKjD,aAlKQ9F,cAwKpB0H,EAAM2D,aAAe,CACnB/B,MAAM,EACNb,UAAU,EACV+B,SAAU,IACVlC,SAAS,EACTyB,OAAO,EACPH,UAAW,GACXC,MAAO,KAGMnC,QC3JA4D,6MAxBblK,MAAQ,CACNmK,QAAS,CACP,2EACA,2EACA,2EACA,2EACA,qJAGK,IACCA,EAAY9K,KAAKW,MAAjBmK,QAER,OACE9L,EAAAC,EAAAC,cAAC6L,EAAD,KACGD,EAAQrI,IAAI,SAAC6B,EAAKe,GAAN,OACXrG,EAAAC,EAAAC,cAAA,OAAKoG,IAAKD,GACRrG,EAAAC,EAAAC,cAAA,OAAKE,IAAKkF,EAAKhF,IAAI,sBAjBJC,aCkBZyL,2LAhBJ,IAAAC,EAC2BjL,KAAKJ,MAA/BR,EADD6L,EACC7L,IAAKwG,EADNqF,EACMrF,MAAOsF,EADbD,EACaC,UAEpB,OACElM,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WAAWyG,MAAOA,GAC/B5G,EAAAC,EAAAC,cAAA,OACEC,UAAU,QACVC,IAAKA,EACLE,IAAI,UAENN,EAAAC,EAAAC,cAAA,QAAMC,UAAU,mBAAmB+L,WAXfrM,IAAMU,6GCQ5BC,UAAOC,EAAAR,EAAKO,MAmPH2L,cA/Ob,SAAAA,EAAYvL,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAmL,IACjBtL,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAqL,GAAAhL,KAAAH,KAAMJ,KAsCRwL,YAAc,WACZvL,EAAKS,SAAS,CAACG,WAAW,IAE1B,IAAMgB,EAAS,8EAAAC,OAAiF7B,EAAKwL,MAErGjK,OAAOS,MAAMJ,EAAW,CACtBK,OAAQ,MACRC,QAAS,CAAEC,OAAU,KACrBC,KAAM,SACLC,KAAK,SAAAC,GAEN,OAA2B,MAApBA,EAASC,OAAiBD,EAASE,OAAS,KAClDH,KAAK,SAAAI,GAEN,IAAIC,EAAa,GACbD,EAAKE,OACPD,EAAaD,EAAKE,KAAKC,IAAI,SAAAC,GAAQ,IACzBE,EAA2BF,EAA3BE,GAAIE,EAAuBJ,EAAvBI,MAAOH,EAAgBD,EAAhBC,OAAQE,EAAQH,EAARG,IAC3B,MAAO,CACLD,GAAIA,EACJG,KAAI,YAAArB,OAAckB,GAClBI,KAAMF,EACNG,QAAS,CAAC,CAACD,KAAML,IACjBO,MAAO,CAACC,OAAQN,OAKtBhD,EAAKS,SAAS,CACZgL,SAAU/I,EACV9B,WAAW,MAGZ4C,MAAM,SAAAC,GACPC,QAAQC,IAAIF,GACZzD,EAAKS,SAAS,CAACG,WAAW,OAvE5BZ,EAAKc,MAAQ,CACX2K,SAAU,GACV7K,WAAW,GAEbZ,EAAK0L,YAAc1M,IAAMyL,YAPRzK,mFAYjBG,KAAKoL,iEAkEoBI,GAEzBA,EADiBtK,IAAEkD,UAAUpE,KAAKW,MAAM2K,kDAI3BtH,EAAIC,EAAcC,GAC/BF,EAAGG,kBACHF,EAAa/C,IAAEkD,UAAUpE,KAAKW,MAAM2K,SAASpH,sCAGtC,IAAAY,EAAA9E,KAAAiL,EACwDjL,KAAKJ,MAA5D6L,EADDR,EACCQ,gBAAiBC,EADlBT,EACkBS,cAAeC,EADjCV,EACiCU,mBADjC5G,EAEyB/E,KAAKW,MAA7B2K,EAFDvG,EAECuG,SAAU7K,EAFXsE,EAEWtE,UAGhBmC,EAKE8I,EALF9I,GACAgJ,EAIEF,EAJFE,SACA5I,EAGE0I,EAHF1I,KACAkI,EAEEQ,EAFFR,UACAvI,EACE+I,EADF/I,OAKF,OAFA3C,KAAKqL,KAAOzI,EAGV5D,EAAAC,EAAAC,cAAC8F,EAAcC,SAAf,KACG,SAAAC,GAAwC,IAArC2G,EAAqC3G,EAArC2G,YAAaC,EAAwB5G,EAAxB4G,QAAS1G,EAAeF,EAAfE,SAElB2G,EAAcT,EAASxK,QAAUwK,EAAS7I,IAAI,SAACC,EAAM2C,GAAQ,IAE/DzC,EAIEF,EAJFE,GACAI,EAGEN,EAHFM,KACAC,EAEEP,EAFFO,QACAC,EACER,EADFQ,MAGE8I,EAAe/I,EAAQR,IAAI,SAAAwJ,GAAM,OAAIA,EAAOjJ,OAAM2C,KAAK,KAE3D,OACE3G,EAAAC,EAAAC,cAACgN,EAAD,CACE5G,IAAK1C,EACLzD,UAAU,gBACVoG,YAAa,CACXC,gBAAiB,QAEnBC,QAAS,SAACzB,GAAQc,EAAKf,eAAeC,EAAIoB,EAAUC,KAEpDrG,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WAAWkG,EAAM,GAChCrG,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACZ6D,GAEHhE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,yBACZ6M,EADH,MACoB9I,EAAMF,WAUpC,OACEhE,EAAAC,EAAAC,cAAA,OAAKC,UAAS,kBAAAuC,OAAoB+J,IAChCzM,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAAAiN,EAAAlN,EAAA,CACEmN,KAAMpN,EAAAC,EAAAC,cAAAmN,EAAApN,EAAA,CAAMqN,KAAK,SACjBC,YAAaZ,GAFf,iBAQF3M,EAAAC,EAAAC,cAAA,OAEEC,UAAU,iBACVyG,MAAOiG,EAAYW,YAAY1L,OAAS,CAAC2L,cAAe,QAAU,CAACA,cAAe,QAElFzN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBAGbH,EAAAC,EAAAC,cAAA,WAASC,UAAU,kBACjBH,EAAAC,EAAAC,cAACwN,EAAD,CACEtN,IAAG,GAAAsC,OAAKkK,EAAL,kBACHhG,MAAO,CACL0C,MAAO,UACPzC,OAAQ,WAEVqF,UAAWA,IAIblM,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,eACX6D,GAEHhE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBAIZwD,EAAOK,QAMdhE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,uBACbH,EAAAC,EAAAC,cAACgN,EAAD,CACE/M,UAAU,gBACVoG,YAAa,CACXC,gBAAiB,QAEnBC,QAAS,WAAOX,EAAK6H,2BAA2Bb,KAEhD9M,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,OACEE,IAAKwN,IACLtN,IAAI,aAENN,EAAAC,EAAAC,cAAA,wCACAF,EAAAC,EAAAC,cAAA,QAAMC,UAAU,YAAhB,UACKmM,EAASxK,OADd,cAON9B,EAAAC,EAAAC,cAAAO,EAAAR,EAAA,CAAME,UAAW4M,EAAc,GAAG,cAC/BA,IACCtL,EACEzB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAcH,EAAAC,EAAAC,cAAC8H,EAAD,OAE7BhI,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAAaH,EAAAC,EAAAC,cAAA2N,EAAA5N,EAAA,CAAQ6D,MAAM,8CAUpD9D,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACbH,EAAAC,EAAAC,cAAA,OACEC,UAAU,qBACVyG,MAAO,CACLkH,gBAAe,OAAApL,OAASkK,EAAT,iCApON/M,IAAMU,WCF7BC,EAAOC,EAAAR,EAAKO,KACZE,EAAQF,EAAKE,MA8OJqN,cA1Ob,SAAAA,EAAYnN,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA+M,IACjBlN,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAiN,GAAA5M,KAAAH,KAAMJ,KA6ER+L,mBAAqB,WACnB9L,EAAKS,SAAS,SAAA0M,GACZ,MAAO,CAAEC,cAAeD,EAAUC,iBAhFnBpN,EAoFnBqN,oBAAsB,SAAClJ,GAErB,IAAMmJ,EAAOnJ,EAAGoJ,cAKhB,GAAID,EAAKE,aAAa,cAAe,CAEnC,IAAMC,EAAQH,EAAKI,aAAa,cAIhC1N,EAAKS,SAAS,SAAA0M,GAMZ,MAAO,CACLC,cAAc,EACdO,UAPuC,SAArCL,EAAKI,aAAa,eACfP,EAAUS,cAAcH,GAExBN,EAAUU,UAAUJ,QArGdzN,EA+GnB8N,aAAe,SAAClE,GACd,IAAMmE,EAAM,GAAAlM,OACVmM,mBADU,kCAAAnM,OAEqB+H,EAFrB,SAIZrI,OAAOS,MAAM+L,GAAQ1L,KACnB,SAAAC,GAAQ,OAAwB,MAApBA,EAASC,OAAiBD,EAASE,OAAS,KACxDH,KACA,SAAAI,GACEzC,EAAKS,SAAS,CAAEoN,UAAWpL,MAE7Be,MACA,SAAAC,GAAM,OAAIC,QAAQC,IAAIF,MAxHxBzD,EAAKc,MAAQ,CACX8M,cAAe,CACb,CACE7K,GAAM,WACNgJ,SAAY,0EACZ5I,KAAQ,6EACRD,KAAQ,0BACRmI,UAAa,YACbvI,OAAU,CACRK,KAAQ,iBACR8K,SAAY,0BAEb,CACDlL,GAAM,WACNgJ,SAAY,0EACZ5I,KAAQ,8EACRD,KAAQ,0BACRmI,UAAa,YACbvI,OAAU,CACRK,KAAQ,uBACR8K,SAAY,4BAEb,CACDlL,GAAM,WACNgJ,SAAY,0EACZ5I,KAAQ,yGACRD,KAAQ,0BACRmI,UAAa,YACbvI,OAAU,CACRK,KAAQ,qBACR8K,SAAY,4BAEb,CACDlL,GAAM,WACNgJ,SAAY,0EACZ5I,KAAQ,oGACRD,KAAQ,0BACRmI,UAAa,YACbvI,OAAU,CACRK,KAAQ,iBACR8K,SAAY,6BAEb,CACDlL,GAAM,WACNgJ,SAAY,0EACZ5I,KAAQ,kGACRD,KAAQ,0BACRmI,UAAa,WACbvI,OAAU,CACRK,KAAQ,0BACR8K,SAAY,6BAEb,CACDlL,GAAM,WACNgJ,SAAY,0EACZ5I,KAAQ,0FACRD,KAAQ,0BACRmI,UAAa,aACbvI,OAAU,CACRK,KAAQ,2BACR8K,SAAY,6BAIlBJ,UAAW,GACXT,cAAc,EACdO,UAAW,IAEb3N,EAAKkO,QAAU,EAvEElO,mFA2EjBG,KAAK2N,aAAa3N,KAAK+N,0CAoDhB,IAAAjJ,EAAA9E,KAAA+E,EACsD/E,KAAKW,MAA1D8M,EADD1I,EACC0I,cAAeC,EADhB3I,EACgB2I,UAAWT,EAD3BlI,EAC2BkI,aAAcO,EADzCzI,EACyCyI,UAG1CQ,EAAWP,EAAchL,IAAI,SAACwL,EAAU5I,GAAQ,IAElDzC,EAIEqL,EAJFrL,GACAgJ,EAGEqC,EAHFrC,SACA5I,EAEEiL,EAFFjL,KACAkI,EACE+C,EADF/C,UAGF,OACElM,EAAAC,EAAAC,cAAA,MACEoG,IAAK1C,EACLzD,UAAU,QACV+O,aAAY7I,EACZ8I,cAAY,OACZ1I,QAAS,SAACzB,GAAD,OAAQc,EAAKoI,oBAAoBlJ,KAE1ChF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACbH,EAAAC,EAAAC,cAACwN,EAAD,CACEtN,IAAG,GAAAsC,OAAKkK,EAAL,kBACHhG,MAAO,CACLwI,SAAU,WACVC,IAAK,EACLC,KAAM,GAERpD,UAAWA,KAGflM,EAAAC,EAAAC,cAAA,KAAGC,UAAU,OAAO6D,MAKpBuL,EAAeb,GAAaA,EAAUjL,IAAI,SAACwL,EAAU5I,GAAQ,IAE/DzC,EAKEqL,EALFrL,GACAgJ,EAIEqC,EAJFrC,SACA5I,EAGEiL,EAHFjL,KACAkI,EAEE+C,EAFF/C,UACAvI,EACEsL,EADFtL,OAGF,OACE3D,EAAAC,EAAAC,cAACsP,EAAD,CACElJ,IAAK1C,EACL6L,MAAK,GAAA/M,OAAKkK,EAAL,kBACLnG,QAAS,SAACzB,GAAD,OAAQc,EAAKoI,oBAAoBlJ,IAC1C0B,cAAY,EACZwI,aAAY7I,EACZ8I,cAAY,OAEXnL,EARH,IAQShE,EAAAC,EAAAC,cAACwP,EAAD,QAAAhN,OAAWiB,EAAOK,KAAlB,UAAAtB,OAA4BwJ,EAA5B,0BAKb,OACElM,EAAAC,EAAAC,cAAC8F,EAAcC,SAAf,KACG,SAAAC,GAAA,IAAE2G,EAAF3G,EAAE2G,YAAF,OACC7M,EAAAC,EAAAC,cAACF,EAAAC,EAAM0P,SAAP,KACE3P,EAAAC,EAAAC,cAAC0P,EAAD,MACA5P,EAAAC,EAAAC,cAAA,OACEC,UAAU,YACVyG,MAAOiG,EAAYW,YAAY1L,OAAS,CAAC2L,cAAe,QAAU,CAACA,cAAe,QAElFzN,EAAAC,EAAAC,cAAC2P,EAAD,MACA7P,EAAAC,EAAAC,cAAA,OAAKoG,IAAI,OAAOnG,UAAU,UAA1B,4BAGAH,EAAAC,EAAAC,cAAA,MACEoG,IAAI,SACJnG,UAAU,aAET6O,GAGHhP,EAAAC,EAAAC,cAAAO,EAAAR,EAAA,CAAM6P,aAAc,iBAAM,6BACvBP,IAILvP,EAAAC,EAAAC,cAACwH,EAAA,WAAD,CACEC,GAAIsG,EACJrG,QAAS,IACTC,cAAY,EACZC,eAAa,GAEZ,SAAC1E,GACA,OACEpD,EAAAC,EAAAC,cAAC6P,EAAD,CACEtD,gBAAe,qBAAA/J,OAAuBU,GACtCsJ,cAAe8B,EACf7B,mBAAoB7G,EAAK6G,iCA/N1B9M,IAAMU,4BCRnBC,UAAOC,EAAAR,EAAKO,MACZE,EAAQF,EAAKE,MA+EJsP,mLA3EJ,IAAA/D,EAQHjL,KAAKJ,MANP6L,EAFKR,EAELQ,gBACAwD,EAHKhE,EAGLgE,QACAC,EAJKjE,EAILiE,YACAC,EALKlE,EAKLkE,sBACAC,EANKnE,EAMLmE,iBACAC,EAPKpE,EAOLoE,kBAIIC,EACJtQ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,2BACbH,EAAAC,EAAAC,cAAA,OACEC,UAAS,OAAAuC,OAASwN,EAAc,QAAU,OAAjC,SACTzJ,QAAS0J,IAEXnQ,EAAAC,EAAAC,cAAA,OACEC,UAAU,oBACVsG,QAAS4J,KAKXE,EAAc,KAElB,GAAIrO,IAAEsO,QAAQP,GACZM,EACEvQ,EAAAC,EAAAC,cAACuQ,EAAD,CACEtQ,UAAU,qBACVuQ,MAAOJ,EACP5J,cAAY,GAHd,4CAQG,KAEH1C,EAGEiM,EAHFjM,KACAC,EAEEgM,EAFFhM,QACAC,EACE+L,EADF/L,MAIEyM,EAAS,GAGXA,EADEzM,EAAMC,QAAUD,EAAMC,OAAOrC,QAAUoC,EAAMC,OAAOyM,SAAS,QACzD,GAAAlO,OAAMwB,EAAMC,QAET0M,IAGXN,EACEvQ,EAAAC,EAAAC,cAACuQ,EAAD,CACEtQ,UAAU,qBACVsP,MAAOkB,EACPD,MAAOJ,EACP7J,QAAS2J,EACT7J,YAAa,CAAEC,gBAAiB,QAChCE,cAAY,GAEX1C,EACDhE,EAAAC,EAAAC,cAAC4Q,EAAD,KAAQ7M,EAAQR,IAAI,SAAA6B,GAAG,OAAIA,EAAItB,OAAM2C,KAAK,OAKhD,OACE3G,EAAAC,EAAAC,cAAA,OAAKC,UAAS,cAAAuC,OAAgB+J,IAC3B8D,UAvEgBhQ,+BCiCVwQ,sNArCbxE,YAAc1M,IAAMyL,cAQpB0F,WAAa,WACNnQ,EAAK0L,YAAYlD,UACtBxI,EAAKoQ,OAAS,IAAInH,IAAQjJ,EAAK0L,YAAYlD,QAAS,CAACiB,OAAO,QAG9D4G,cAAgB,WAAQrQ,EAAKoQ,QAAUpQ,EAAKoQ,OAAO3I,aAEnD6I,cAAgB,WAAQtQ,EAAKoQ,OAAO7I,8FAZlCpH,KAAKgQ,4DAGkBhQ,KAAKiQ,QAAUjQ,KAAKiQ,OAAO7I,oDAYlDpH,KAAKiQ,QAAUjQ,KAAKiQ,OAAOG,gBAAgBC,MAAMrQ,KAAKiQ,OAAQK,4CAGvD,IAAArF,EAC8CjL,KAAKJ,MAAlDgG,EADDqF,EACCrF,MAAOzG,EADR8L,EACQ9L,UAAWgJ,EADnB8C,EACmB9C,SAAaoI,EADhCzQ,OAAA0Q,EAAA,EAAA1Q,CAAAmL,EAAA,kCAGP,OACEjM,EAAAC,EAAAC,cAAA,MAAAY,OAAA2Q,OAAA,CACEzK,IAAKhG,KAAKuL,YACV3F,MAAOA,EACPzG,UAAS,kBAAAuC,OAAoBvC,IACzBoR,GAEHpI,UAjCY5I,cC+fNmR,eAxfb,SAAAA,EAAY9Q,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA0Q,IACjB7Q,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA4Q,GAAAvQ,KAAAH,KAAMJ,KAuCR+Q,iBAAmB,SAAC3M,EAAI4M,EAAQC,GAC9B,IAAI3P,IAAEsO,QAAQ3P,EAAKoP,SAAnB,CAEApP,EAAKiR,YAAa,EAEH9M,EAAGO,OAAlB,IAIMwM,EAAkBlR,EAAKmR,eAAe3I,QAG5CxI,EAAKoR,sBAAwBF,EAAgBG,WAE7CrR,EAAKsR,kBAAoBtR,EAAKoR,sBAAwB,EACtDpR,EAAKuR,mBAAqBvR,EAAKoR,sBAAwBpR,EAAKwR,iBAAmB,EAG/ExR,EAAKyR,WAAatN,EAAGuN,cAAc,GAAGC,QAGtC,IAAMC,EAAmB5R,EAAK6R,gBAAgBrJ,QAE9CxI,EAAK8R,eAAiB9R,EAAK8R,eAAeC,KAApB9R,OAAA+R,EAAA,EAAA/R,QAAA+R,EAAA,EAAA/R,CAAAD,IAA+B+Q,GACrDa,EAAiBlH,iBAAiB,YAAa1K,EAAKiS,iBACpDL,EAAiBlH,iBAAiB,WAAY1K,EAAK8R,gBAEnDd,MAnEiBhR,EAsEnBiS,gBAAkB,SAAC9N,GAGjB,IAAM+N,EAAa/N,EAAGgO,QAAQ,GAAGR,QAGjC,GAAI3R,EAAKsR,kBAAoBY,GAAcA,EAAalS,EAAKuR,mBAAoB,CAC/E,IAAMa,EAASF,EAAalS,EAAKyR,WACjCzR,EAAKyR,WAAaS,EAElB,IAAIG,EAAerS,EAAKsS,SAAWF,EAC/BC,EAAe,EACjBA,EAAe,EACNA,EAAerS,EAAKwR,mBAC7Ba,EAAerS,EAAKwR,kBAEtBxR,EAAKsS,SAAWD,EAEhBrS,EAAKD,MAAMwS,kBAAmBF,EAAerS,EAAKwR,oBAxFnCxR,EAkLnBwS,iBAAmB,WACjBxS,EAAKS,SAAS,CACZgS,WAAW,EACXC,WAAW,KArLI1S,EAwLnB2S,iBAAmB,WACjB3S,EAAKS,SAAS,CACZgS,WAAW,EACXC,WAAW,KAxLb1S,EAAKc,MAAQ,CAGX2R,WAAW,EACXC,WAAW,GAGb1S,EAAK4S,UAAY5T,IAAMyL,YACvBzK,EAAK6R,gBAAkB7S,IAAMyL,YAC7BzK,EAAKmR,eAAiBnS,IAAMyL,YAG5BzK,EAAK6S,UAAW,EAChB7S,EAAK8S,eAAiB,EACtB9S,EAAK+S,qBAAsB,EAC3B/S,EAAKiR,YAAa,EAClBjR,EAAKsS,SAAW,EAnBCtS,mFAwBjB,IAAMkR,EAAkB/Q,KAAKgR,eAAe3I,QAC5CrI,KAAKqR,iBAAmBN,EAAgBtI,yDAIpCzI,KAAKW,MAAM4R,YAETvS,KAAK0S,SACP1S,KAAKyS,UAAUpK,QAAQ+H,gBAAgB,aAAa,KAAK,GAAM,GAE3DpQ,KAAK4S,qBAAuB5S,KAAK2S,eAAiB,GACpD3S,KAAKyS,UAAUpK,QAAQ+H,gBAAgB,mBAAmB,KAAK,GAAM,2CAoE9DQ,EAAQ5M,GAGrBhE,KAAK8Q,YAAa,EAElB,IAAMW,EAAmBzR,KAAK0R,gBAAgBrJ,QAC9CoJ,EAAiBoB,oBAAoB,YAAa7S,KAAK8R,iBACvDL,EAAiBoB,oBAAoB,WAAY7S,KAAK2R,gBAEtDf,qCA+EO,IAAA9L,EAAA9E,KAAAiL,EAgBHjL,KAAKJ,MAbP6L,EAHKR,EAGLQ,gBACAwD,EAJKhE,EAILgE,QACAyD,EALKzH,EAKLyH,SACAI,EANK7H,EAML6H,UACA7Q,EAPKgJ,EAOLhJ,KACAkN,EARKlE,EAQLkE,sBACA4D,EATK9H,EASL8H,oBACAC,EAVK/H,EAUL+H,oBACAC,EAXKhI,EAWLgI,oBAGA7D,EAdKnE,EAcLmE,iBACAC,EAfKpE,EAeLoE,kBAfKtK,EAwBH/E,KAAKW,MAHP2R,EArBKvN,EAqBLuN,UACAC,EAtBKxN,EAsBLwN,UAMF,GAFAvS,KAAKiP,QAAUA,EAEX/N,IAAEsO,QAAQP,GACZ,OACEjQ,EAAAC,EAAAC,cAAA,OAAKC,UAAS,cAAAuC,OAAgB+J,IAC5BzM,EAAAC,EAAAC,cAAAiN,EAAAlN,EAAA,CACEE,UAAU,uBACViN,KAAMpN,EAAAC,EAAAC,cAAAmN,EAAApN,EAAA,CAAMqN,KAAK,SACjBC,YAAa6C,GAHf,wCAQApQ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,MACbH,EAAAC,EAAAC,cAAA,OACEC,UAAU,QACVC,IAAKyQ,UAMf7Q,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBAMe8P,EAA5BrM,GAzDD,IAyDKI,EAAwBiM,EAAxBjM,KAAMC,EAAkBgM,EAAlBhM,QAASC,EAAS+L,EAAT/L,MAGzBgQ,EAOEJ,EAPFI,SACAC,EAMEL,EANFK,QACAC,EAKEN,EALFM,aACAlE,EAIE4D,EAJF5D,YACAmE,EAGEP,EAHFO,MACAV,EAEEG,EAFFH,cACAC,EACEE,EADFF,oBAKF5S,KAAK0S,SAAWA,EAChB1S,KAAK2S,cAAgBA,EACrB3S,KAAK4S,oBAAsBA,EAE3B,IAAMU,EACJtU,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBACbH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,qBAAqB6D,GAClChE,EAAAC,EAAAC,cAAA,KAAGC,UAAU,wBAAb,KACK8D,EAAQR,IAAI,SAAA6B,GAAG,OAAIA,EAAItB,OAAM2C,KAAK,KADvC,OASF4N,EAAe,KAEfC,EAAgB,EAEdH,EAAMvS,SAMRyS,EAAeF,EAAM5Q,IAAI,SAAC6B,EAAKe,GAC7B,IAAMoO,EAAM,WAAA/R,OACV2D,IAAQsN,EAAgB,kBAAoB,IAc9C,OAVE3T,EAAAC,EAAAC,cAAA,KACE0D,GAAIyC,EACJC,IAAKD,EACLO,MAAgB,KAARtB,EAAc,CAACuB,OAAQ,QAAU,GACzC1G,UAAWsU,GAEVnP,KASPkP,GAAkC,GAAfH,EAAMvS,QAQ3B,IAAI6O,EAAS,GAGXA,EADEzM,EAAMC,QAAUD,EAAMC,OAAOrC,QAAUoC,EAAMC,OAAOyM,SAAS,QACzD,GAAAlO,OAAMwB,EAAMC,QAET0M,IAIX,IAAM6D,EAAoB1T,KAAKqR,iBAAmBsC,WAAWP,GAG7D,OAFApT,KAAKmS,SAAWuB,EAGd1U,EAAAC,EAAAC,cAAC8F,EAAcC,SAAf,KACG,SAAAC,GAAqB,IAAlB0O,EAAkB1O,EAAlB0O,KAAMC,EAAY3O,EAAZ2O,MAER,OACE7U,EAAAC,EAAAC,cAAA,OAAKC,UAAS,cAAAuC,OAAgB+J,IAC5BzM,EAAAC,EAAAC,cAAAiN,EAAAlN,EAAA,CACEE,UAAU,uBACViN,KAAMpN,EAAAC,EAAAC,cAAAmN,EAAApN,EAAA,CAAMqN,KAAK,SACjBC,YAAa6C,GAEZkE,GAIHtU,EAAAC,EAAAC,cAACwH,EAAA,WAAD,CACEC,GAAI2L,EACJ1L,QAAS,IACTC,cAAY,EACZC,eAAa,GAEZ,SAAC1E,GACA,OACEpD,EAAAC,EAAAC,cAAA,OAAKC,UAAS,yBAAAuC,OAA2BU,IACvCpD,EAAAC,EAAAC,cAAA,OACEC,UAAU,SACVsG,QAAS,kBAAMX,EAAK0N,qBAEpBxT,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,MACbH,EAAAC,EAAAC,cAAA,OACEC,UAAU,QACVC,IAAKuQ,UAWrB3Q,EAAAC,EAAAC,cAACwH,EAAA,WAAD,CACEC,GAAI4L,EACJ3L,QAAS,IACTC,cAAY,EACZC,eAAa,GAEZ,SAAC1E,GACA,OACEpD,EAAAC,EAAAC,cAAC4U,GAAD,CACE9N,IAAKlB,EAAK2N,UACVtT,UAAS,2BAAAuC,OAA6BU,GACtCqD,QAAS,kBAAMX,EAAKuN,qBAEpBrT,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACZoU,EACCvU,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACZoU,GAGHvU,EAAAC,EAAAC,cAAA,KAAGC,UAAU,YAAb,gCAQZH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBAAmB6G,IAAKlB,EAAK4M,iBAE1C1S,EAAAC,EAAAC,cAAA,KAAGC,UAAU,iBAAiBgU,GAE9BnU,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBACbH,EAAAC,EAAAC,cAAA,OACE8G,IAAKlB,EAAKkM,eACV7R,UAAU,gBAEVH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,OACEC,UAAU,WACVyG,MAAO,CAAC0C,MAAK,GAAA5G,OAAKoD,EAAKgM,WAAahM,EAAKqN,SAASuB,EAArC,SAGf1U,EAAAC,EAAAC,cAAA,OACEC,UAAU,uBACVyG,MAAO,CAACmO,UAAS,eAAArS,OAAiBoD,EAAKgM,WAAahM,EAAKqN,SAASuB,EAAjD,kBAEjBM,aAAc,SAAChQ,GAAD,OAAQc,EAAK6L,iBAAiB3M,EAAI4P,EAAMC,KAEtD7U,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBAwCvBH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,iBAAiB+T,IAGhClU,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,OACEC,UAAS,OAAAuC,OAASO,EAAT,SACTwD,QAASwN,IAEXjU,EAAAC,EAAAC,cAAA,OACEC,UAAU,gBACVsG,QAASsN,IAEX/T,EAAAC,EAAAC,cAAA,OACEC,UAAS,OAAAuC,OAASwN,EAAc,QAAU,OAAjC,SACTzJ,QAAS0J,IAEXnQ,EAAAC,EAAAC,cAAA,OACEC,UAAU,gBACVsG,QAASuN,IAEXhU,EAAAC,EAAAC,cAAA,OACEC,UAAU,gBACVsG,QAAS4J,MAKfrQ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,OACEoJ,MAAM,OACNzC,OAAO,OACPzG,IAAKuQ,eA7eE9Q,IAAMU,WCJzBC,WAAOC,EAAAR,EAAKO,MA0FHyU,+LArFX7S,OAAO8S,SAASC,cAAc,8BAA8BC,kDAGrD,IAAAnJ,EACwCjL,KAAKJ,MAA5C6L,EADDR,EACCQ,gBAAiB4D,EADlBpE,EACkBoE,kBAEzB,OACErQ,EAAAC,EAAAC,cAAC8F,EAAcC,SAAf,KACG,SAAAC,GAA6D,IAA1D2G,EAA0D3G,EAA1D2G,YAAawI,EAA6CnP,EAA7CmP,YAAaC,EAAgCpP,EAAhCoP,WAAYC,EAAoBrP,EAApBqP,cAEtC/H,EAEEX,EAFFW,YACAgI,EACE3I,EADF2I,aAGIC,EACJzV,EAAAC,EAAAC,cAAA,OACEC,UAAU,kBACVsG,QAAS,kBAAM8O,OAIbG,EAAclI,EAAY/J,IAAI,SAACC,EAAM2C,GAAQ,IAE/CzC,EAGEF,EAHFE,GACAI,EAEEN,EAFFM,KACAC,EACEP,EADFO,QAGI0R,EACJ3V,EAAAC,EAAAC,cAAA,OACEC,UAAU,iBACVsG,QAAS,SAACzB,GACRA,EAAGG,kBACHmQ,EAAWjP,MAKjB,OACErG,EAAAC,EAAAC,cAAC0V,GAAD,CACEtP,IAAK1C,EACLzD,UAAS,GAAAuC,OAAK8S,IAAiBnP,EAAM,cAAgB,IACrDqK,MAAOiF,EACPlP,QAAS,kBAAM4O,EAAYhP,KAE1BrC,EACDhE,EAAAC,EAAAC,cAAA,QAAMC,UAAU,oBACb,MAAQ8D,EAAQR,IAAI,SAAA6B,GAAG,OAAIA,EAAItB,OAAM2C,KAAK,SAMnD,OACE3G,EAAAC,EAAAC,cAAA,OACEC,UAAS,gBAAAuC,OAAkB+J,GAC3BuI,aAAc,SAAChQ,GAAD,OAAQA,EAAGG,oBAEzBnF,EAAAC,EAAAC,cAAC0V,GAAD,CACElF,MAAO+E,EACP/O,cAAY,GAFd,2BAKE1G,EAAAC,EAAAC,cAAA,QAAMC,UAAU,YAAhB,UACKqN,EAAY1L,OADjB,YAIF9B,EAAAC,EAAAC,cAAAO,EAAAR,EAAA,KACGyV,GAEH1V,EAAAC,EAAAC,cAAC0V,GAAD,CACEzV,UAAU,YACVsG,QAAS4J,EACT3J,cAAY,GAHd,0BAzEY7G,IAAMU,WCmdjBsV,eA9cb,SAAAA,EAAYjV,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA6U,IACjBhV,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA+U,GAAA1U,KAAAH,KAAMJ,KAwERkV,SAAW,WACT,IAAMC,EAAM,yEAAArT,OAA4E7B,EAAKmV,QAC7FzR,QAAQC,IAAIuR,GAEZ3T,OAAOS,MAAMkT,EAAQ,CACnBjT,OAAQ,MACRC,QAAS,CAAEC,OAAU,KACrBC,KAAM,SACLC,KACD,SAAAC,GAEE,OAA2B,MAApBA,EAASC,OAAiBD,EAAS8S,OAAS,OAErD/S,KACA,SAAAI,GACE,GAAIA,EAAM,CAGR,IAAM4S,EAAS5S,EAAK+H,MAAM,MAGxBgJ,EAAQ,GACR8B,EAAe,GAEjBD,EAAOE,QAAQ,SAACC,GACd,IAAMC,EAAYD,EAAIE,MAAM,gBAE5B,GAAID,EAAW,CAEb,IACEE,EAAiBF,EAAU,GAAGG,OAAOpL,MAAM,KAG3CqL,EAFsC,GAA9BC,SAASH,EAAe,IACxB7B,WAAW6B,EAAe,IAG/BI,MAAMF,KACTrC,EAAMrS,KAAKsU,EAAU,GAAGG,QACxBN,EAAanU,KAAK0U,OAKxBnS,QAAQC,IAAI6P,GAGZxT,EAAKS,SAAS,CACZ+S,MAAOA,EACP8B,aAAcA,EACdxC,eAAgB,OAItBtP,MACA,SAAAC,GAEEzD,EAAKS,SAAS,CACZ+S,MAAO,GACP8B,aAAc,QAlIHtV,EA6NnBuP,iBAAmB,WACjBvP,EAAKS,SAAS,SAAAK,GAAK,MAAK,CACtBkV,gBAAiBlV,EAAMkV,mBA/NRhW,EAmOnBwP,kBAAoB,SAACrL,GACnBA,EAAGG,kBACHtE,EAAKS,SAAS,SAAAK,GAAK,MAAK,CACtBmV,iBAAkBnV,EAAMmV,oBAtOTjW,EAoPnBuS,kBAAoB,SAAC2D,GACnB,IACEC,EAAYnW,EAAKoW,SAAS5N,QAC1B6K,EAAW8C,EAAU9C,SAEvB8C,EAAUE,YAAchD,EAAW6C,GAtPnClW,EAAKc,MAAQ,CACXwV,UAAW,EACXjD,SAAU,QACVC,QAAS,QACTC,aAAc,IAGdC,MAAO,GACP8B,aAAc,GACdxC,eAAgB,EAChBC,qBAAqB,EACrB1D,aAAa,EAEb2G,gBAAgB,EAChBC,iBAAiB,GAEnBjW,EAAKoW,SAAWpX,IAAMyL,YAItBzK,EAAKmV,OAAS,EACdnV,EAAK6S,UAAW,EAChB7S,EAAK2U,cAAgB,EACrB3U,EAAKuW,YAAc,EACnBvW,EAAKwW,SAAU,EACfxW,EAAKyW,WAAa,iDAClBzW,EAAK0W,YAAc,GAEnB1W,EAAK2W,SAAW,CACd,CACEC,KAAM,2BACNtX,UAAW,QAEb,CACEsX,KAAM,2BACNtX,UAAW,UAEb,CACEsX,KAAM,2BACNtX,UAAW,WA1CEU,iIAsDbG,KAAK0W,cAGL1W,KAAKqW,QACDrW,KAAKiW,SAAS5N,QAAQsO,QAC1B3W,KAAK4W,aAGH5W,KAAKiW,SAAS5N,QAAQsO,QACxB3W,KAAK6W,YAKL7W,KAAK0S,UACP1S,KAAK8U,gDAmEG,IAAAhQ,EAAA9E,KACVA,KAAKiW,SAAS5N,QAAQuL,OAAO1R,KAAK,WAEhC4C,EAAKxE,SAAS,CAAE4O,aAAa,KAC5B,SAAC5L,GACFC,QAAQC,IAAIF,0CAKdtD,KAAKiW,SAAS5N,QAAQwL,QACtB7T,KAAKM,SAAS,CAAE4O,aAAa,iDAGVlL,EAAI8S,EAAUC,IACjC/S,EAAGG,kBACCnE,KAAK0W,eAGL1W,KAAKiW,SAAS5N,QAAQsO,OAExBG,EADc9W,KAAKwU,cAGnBuC,gDAIeD,GACb9W,KAAK0W,cAGT1W,KAAKM,SAAS,CAAE8S,aAAc,MAE9B0D,EADc9W,KAAKgX,UAAS,gDAIXF,GACb9W,KAAK0W,cAGT1W,KAAKM,SAAS,CAAE8S,aAAc,MAE9B0D,EADc9W,KAAKgX,0DAKnB,IAAIhX,KAAK0W,YAAT,CAGA,IAAMO,GAAajX,KAAKW,MAAMwV,UAAY,GAAKnW,KAAKwW,SAAS1V,OAE7Dd,KAAKiW,SAAS5N,QAAQQ,KAAqB,IAAdoO,EAC7BjX,KAAKM,SAAS,CAAE6V,UAAWc,oDAiD3BjX,KAAKM,SAAS,CACZ4S,SAAUlT,KAAKkX,WAAWlX,KAAKiW,SAAS5N,QAAQ6K,UAChDE,aAAc,IACdD,QAAS,qDAYM,IAAApO,EAE4B/E,KAAKW,MAA9CwS,EAFapO,EAEboO,QAASR,EAFI5N,EAEJ4N,cAAewC,EAFXpQ,EAEWoQ,aAFXgC,EAGanX,KAAKiW,SAAS5N,QAAxC6K,EAHaiE,EAGbjE,SAAUgD,EAHGiB,EAGHjB,YAGZkB,EAAcpX,KAAKkX,WAAWhB,GAC9BmB,EAAgB,GAAA3V,QAAOwU,EAAchD,GAAUoE,QAAQ,IAEvDC,EAAoBrW,IAAEsW,cAAcrC,EAAc,SAAA7Q,GAAG,OAAIA,GAAO4R,IAE9D/C,IAAYiE,EACdpX,KAAKM,SAAS,CACZ6S,QAASiE,EACThE,aAAciE,IAEPnB,IAAgBhD,GACzBlT,KAAKM,SAAS,CACZ8S,aAAciE,IAId1E,IAAkB4E,EACpBvX,KAAKM,SAAS,CACZqS,cAAe4E,EACf3E,qBAAqB,IAGvB5S,KAAKM,SAAS,CACZsS,qBAAqB,wCAKfkE,GACV,IAAMxJ,EAAQtN,KAAKgX,WACnBhX,KAAKM,SAAS,CAAEmX,aAAc,IAAKrE,aAAc,MACjD0D,EAASxJ,8CAIT,IAAM0I,EAAYhW,KAAKiW,SAAS5N,QAChC9E,QAAQC,IAAIwS,EAAU0B,OAGO,IAAzB1B,EAAU0B,MAAMC,OAClB3B,EAAU4B,OACV5B,EAAUE,YAAcvC,WAAW3T,KAAKW,MAAMyS,cAAgB,yCAOhE,OAA6B,IAArBpT,KAAKoW,+CAGJyB,GACT,IAAMC,EAAUnC,SAAQ,GAAAjU,OAAImW,EAAU,KAChCE,EAAUpC,SAAQ,GAAAjU,OAAImW,EAAU,KAChCG,EAASF,EAAU,GAAV,IAAApW,OAAmBoW,GAAnB,GAAApW,OAAkCoW,GAC3CG,EAASF,EAAU,GAAV,IAAArW,OAAmBqW,GAAnB,GAAArW,OAAkCqW,GAEjD,SAAArW,OAAUsW,EAAV,KAAAtW,OAAoBuW,oCAGbC,QACQC,IAAXD,IACFA,GAAS,GAEX,IAAI5K,EAAQ,EACZ,OAAQtN,KAAKW,MAAMwV,WACjB,KAAK,EACL,KAAK,EAED7I,EADE4K,GAEElY,KAAKwU,aAAe,EAAIxU,KAAKoW,aAC3BpW,KAAKoW,aAEFpW,KAAKwU,aAAe,GAAKxU,KAAKoW,YAEzC,MACF,KAAK,EACH9I,EAAQqI,SAASyC,KAAKC,SAAWrY,KAAKoW,aAK1C,OAAO9I,mCAGA,IAAAgL,EAAAtY,KAAAuY,EAEqCvY,KAAKW,MAAzCkV,EAFD0C,EAEC1C,eAAgBC,EAFjByC,EAEiBzC,gBAExB,OACE9W,EAAAC,EAAAC,cAAC8F,EAAcC,SAAf,KACG,SAAAC,GAAyC,IAAtC2G,EAAsC3G,EAAtC2G,YAAawI,EAAyBnP,EAAzBmP,YAAaR,EAAY3O,EAAZ2O,MAE1BrH,EAIEX,EAJFW,YACA+J,EAGE1K,EAHF0K,YACA/B,EAEE3I,EAFF2I,aACA6B,EACExK,EADFwK,QAGImC,EAAYjC,EAAY3T,GAY9B,OAVI4V,IACFF,EAAK5F,SAAW4F,EAAKtD,SAAWwD,EAChCF,EAAKtD,OAASwD,GAEhBF,EAAK9D,aAAeA,EACpB8D,EAAKlC,YAAc5J,EAAY1L,OAC/BwX,EAAKjC,QAAUA,EACfiC,EAAK/B,YAAcA,EACnB+B,EAAKG,UAAYvX,IAAEsO,QAAQ+G,GAGzBvX,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBAEbH,EAAAC,EAAAC,cAAA,SACE8G,IAAKsS,EAAKrC,SACV7W,IACEmX,GAAeA,EAAYxT,KAA3B,GAAArB,OAAqC4W,EAAKhC,YAA1C5U,OAAuD6U,EAAY3T,IAAO,GAE5E8V,iBAAkB,kBAAMJ,EAAKK,wBAC7BC,aAAc,kBAAMN,EAAKO,oBACzBC,QAAS,kBAAMR,EAAKS,YAAY1E,IAChC2E,QAAS,kBAAMV,EAAKW,sBAMtBja,EAAAC,EAAAC,cAACwH,EAAA,WAAD,CACEC,IAAK2R,EAAKG,UACV7R,QAAS,IACTC,cAAY,EACZC,eAAa,GAEZ,SAAC1E,GACA,OACEpD,EAAAC,EAAAC,cAACga,EAAD,CACEzN,gBAAe,qBAAA/J,OAAuBU,GACtC6M,QAASsH,EACTrH,YAAaoJ,EAAK3X,MAAMuO,YACxBC,sBAAuB,SAACnL,GAAD,OAAQsU,EAAKa,qBAAqBnV,EAAIqQ,EAAaR,IAC1EzE,iBAAkBkJ,EAAKlJ,iBACvBC,kBAAmB,SAACrL,GAAD,OAAQsU,EAAKjJ,kBAAkBrL,QAM1DhF,EAAAC,EAAAC,cAACwH,EAAA,WAAD,CACEC,IAAI2R,EAAKG,WAAoB5C,EAC7BjP,QAAS,IACTC,cAAY,EACZC,eAAa,EACbsS,SAAU,kBAAMd,EAAKhY,SAAS,CAACuV,gBAAgB,MAE9C,SAACzT,GACA,OACEpD,EAAAC,EAAAC,cAACma,GAAD,CACE5N,gBAAe,qBAAA/J,OAAuBU,GACtC6M,QAASsH,EACT7D,SAAU4F,EAAK5F,SACfI,UAAWwF,EAAK3X,MAChBsB,KAAMqW,EAAK9B,SAAS8B,EAAK3X,MAAMwV,WAAWhX,UAC1CgQ,sBAAuB,SAACnL,GAAD,OAAQsU,EAAKa,qBAAqBnV,EAAIqQ,EAAaR,IAC1Ed,oBAAqB,kBAAMuF,EAAKgB,mBAAmBjF,IACnDrB,oBAAqB,kBAAMsF,EAAKiB,mBAAmBlF,IACnDpB,oBAAqB,kBAAMqF,EAAKkB,sBAChCC,sBAAuBnB,EAAKoB,qBAC5BC,2BAA4BrB,EAAKsB,0BACjCxK,iBAAkBkJ,EAAKlJ,iBACvBC,kBAAmB,SAACrL,GAAD,OAAQsU,EAAKjJ,kBAAkBrL,IAClDoO,kBAAmBkG,EAAKlG,sBAOhCpT,EAAAC,EAAAC,cAACwH,EAAA,WAAD,CACEC,IAAI2R,EAAKG,WAAoB3C,EAC7BlP,QAAS,IACTC,cAAY,EACZC,eAAa,EACbsS,SAAU,kBAAMd,EAAKhY,SAAS,CAACwV,iBAAiB,MAE/C,SAAC1T,GACA,OACEpD,EAAAC,EAAAC,cAAC2a,GAAD,CACEpO,gBAAe,qBAAA/J,OAAuBU,GACtC0X,SAAUtN,EACVgI,aAAcA,EACdnF,kBAAmB,SAACrL,GAAD,OAAQsU,EAAKjJ,kBAAkBrL,kBAncnDnF,IAAMU,WCyPZwa,eA5Pb,SAAAA,EAAYna,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA+Z,IACjBla,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAia,GAAA5Z,KAAAH,KAAMJ,KA8CRgU,KAAO,WACL/T,EAAKS,SAAS,CAAE+V,SAAS,KAhDRxW,EAkDnBgU,MAAQ,WACNhU,EAAKS,SAAS,CAAE+V,SAAS,KAjDzBxW,EAAKc,MAAQ,CACX6L,YAAa,GACb+J,YAAa,GACb/B,cAAe,EACf6B,SAAS,EACT2D,SAAS,GAGXna,EAAKwU,YAAcxU,EAAKwU,YAAYzC,KAAjB9R,OAAA+R,EAAA,EAAA/R,QAAA+R,EAAA,EAAA/R,CAAAD,KAEnBA,EAAKyU,WAAazU,EAAKyU,WAAW1C,KAAhB9R,OAAA+R,EAAA,EAAA/R,QAAA+R,EAAA,EAAA/R,CAAAD,KAClBA,EAAK0U,cAAgB1U,EAAK0U,cAAc3C,KAAnB9R,OAAA+R,EAAA,EAAA/R,QAAA+R,EAAA,EAAA/R,CAAAD,KACrBA,EAAKiM,QAAUjM,EAAKiM,QAAQ8F,KAAb9R,OAAA+R,EAAA,EAAA/R,QAAA+R,EAAA,EAAA/R,CAAAD,KACfA,EAAKoa,OAASpa,EAAKoa,OAAOrI,KAAZ9R,OAAA+R,EAAA,EAAA/R,QAAA+R,EAAA,EAAA/R,CAAAD,KACdA,EAAKuF,SAAWvF,EAAKuF,SAASwM,KAAd9R,OAAA+R,EAAA,EAAA/R,QAAA+R,EAAA,EAAA/R,CAAAD,KAChBA,EAAKqa,cAAgBra,EAAKqa,cAActI,KAAnB9R,OAAA+R,EAAA,EAAA/R,QAAA+R,EAAA,EAAA/R,CAAAD,KAjBJA,mFAsBjB,IAAMsa,EAAY/Y,OAAOC,aAAauD,QAAQ,YAC9C5E,KAAKM,SAASiB,KAAKsD,MAAMsV,iDAGN,IAAApV,EACgC/E,KAAKW,MAAhD6L,EADWzH,EACXyH,YAAa+J,EADFxR,EACEwR,YAAa/B,EADfzP,EACeyP,aAClCpT,OAAOC,aAAaC,QAAQ,WAAWC,KAAKC,UAAU,CAAEgL,cAAa+J,cAAa/B,sDAGxElH,GACNA,GAAS,IACPA,IAAUtN,KAAKW,MAAM6T,aACnBxU,KAAKW,MAAM0V,SACbrW,KAAKM,SAAS,CAAE+V,SAAS,IAG3BrW,KAAKM,SAAS,CACZiW,YAAavW,KAAKW,MAAM6L,YAAYc,GACpCkH,aAAclH,EACd+I,SAAS,wCAcNnS,GACT,IAAMkW,EAAWpa,KAAKW,MAEhB6L,EAAc4N,EAAS5N,YACzBgI,EAAe4F,EAAS5F,aAE5B6F,IAAQC,OAAO9N,EAAa,SAAClI,EAAKe,GAAN,OAAcA,IAAQnB,IAE9CsI,EAAY1L,OAEVoD,EAAYsQ,EACdxU,KAAKM,SAAS,CACZkM,YAAaA,EACbgI,aAAcA,EAAe,IAEtBtQ,IAAcsQ,GAEvBA,EAAetQ,IAAcsI,EAAY1L,OAAS,EAAIoD,EAEtDlE,KAAKM,SAAS,CACZkM,YAAaA,EACb+J,YAAa/J,EAAYgI,GACzBA,aAAcA,EACd6B,SAAS,KAGXrW,KAAKM,SAAS,CAAEkM,YAAaA,IAI/BxM,KAAKuU,wDAKPvU,KAAKM,SAAS,CACZkM,YAAa,GACb+J,YAAa,GACb/B,cAAe,EACf6B,SAAS,oCAIL/K,GAAU,IAAAxG,EAAA9E,KAChBA,KAAKM,SAAS,CACZkM,YAAalB,EACbkJ,cAAe,GACd,kBAAM1P,EAAKuP,YAAY,oCAGrB/I,GACL,IAAMkB,EAAcxM,KAAKW,MAAM6L,YAE/B,GAAIA,EAAY1L,OAAQ,CAGtB,IAAMyZ,EAAYF,IAAQG,aAAalP,EAAUkB,EAAa,MAG1D+N,EAAUzZ,SAEZ0L,EAAYiO,OAAZpK,MAAA7D,EAAW,CAAQxM,KAAKW,MAAM6T,aAAe,EAAG,GAArC9S,OAAA5B,OAAA4a,EAAA,EAAA5a,CAA2Cya,KAEtDva,KAAKM,SAAS,CAAEkM,YAAaA,UAG/BxM,KAAK8L,QAAQR,oCAIR5I,GAAM,IAAA4V,EAAAtY,KACPoa,EAAWpa,KAAKW,MAChB6L,EAAc4N,EAAS5N,YACvBgI,EAAe4F,EAAS5F,aACxBmG,EAAgBnG,EAAe,EAErC,GAAIhI,EAAY1L,OAAQ,CAEtB,IAAM8Z,EAAiBP,IAAQQ,UAAUrO,EAAa,CAAC,KAAM9J,EAAKE,MAG1C,IAApBgY,EAEEA,IAAmBpG,EAErBxU,KAAKqU,YAAYuG,GAERA,EAAiBpG,GAE1BhI,EAAYiO,OAAOE,EAAe,EAAGjY,GAErC8J,EAAYiO,OAAOG,EAAgB,GAEnC5a,KAAKM,SAAS,CACZkM,YAAaA,EACbgI,aAAcA,EAAe,GAC5B,kBAAM8D,EAAKjE,YAAYsG,EAAgB,OAI1CnO,EAAYiO,OAAOG,EAAgB,GAEnCpO,EAAYiO,OAAOE,EAAe,EAAGjY,GAErC1C,KAAKM,SAAS,CAAEkM,YAAaA,GAAe,kBAAM8L,EAAKjE,YAAYsG,OAKrEnO,EAAYiO,OAAOE,EAAe,EAAGjY,GAGrC1C,KAAKM,SAAS,CAAEkM,YAAaA,GAAe,kBAAM8L,EAAKjE,YAAYsG,WAIrE3a,KAAKM,SAAS,CAAEkM,YAAa,CAAC9J,IAAS,kBAAM4V,EAAKjE,YAAYsG,2CAIpDjY,GAAM,IAAAoY,EAAA9a,KACZoa,EAAWpa,KAAKW,MAChB6L,EAAc4N,EAAS5N,YACvBgI,EAAe4F,EAAS5F,aACxBmG,EAAgBnG,EAAe,EAErC,GAAIhI,EAAY1L,OAAQ,CAEtB,IAAM8Z,EAAiBP,IAAQQ,UAAUrO,EAAa,CAAC,KAAM9J,EAAKE,MAG1C,IAApBgY,EAEEA,IAAmBpG,EAErBxU,KAAKqU,YAAYuG,GAERA,EAAiBpG,GAE1BhI,EAAYiO,OAAOE,EAAe,EAAGjY,GAErC8J,EAAYiO,OAAOG,EAAgB,GAEnC5a,KAAKM,SAAS,CACZkM,YAAaA,EACbgI,aAAcA,EAAe,MAK/BhI,EAAYiO,OAAOG,EAAgB,GAEnCpO,EAAYiO,OAAOE,EAAe,EAAGjY,GAErC1C,KAAKM,SAAS,CAAEkM,YAAaA,MAK/BA,EAAYiO,OAAOE,EAAe,EAAGjY,GAErC1C,KAAKM,SAAS,CAAEkM,YAAaA,UAI/BxM,KAAKM,SAAS,CAAEkM,YAAa,CAAC9J,IAAS,kBAAMoY,EAAKzG,YAAY,sCAOhE,OAEIrV,EAAAC,EAAAC,cAAC8F,EAAc+V,SAAf,CACE1a,MAAO,CACLwL,YAAa7L,KAAKW,MAClB0T,YAAarU,KAAKqU,YAClBT,KAAM5T,KAAK4T,KACXC,MAAO7T,KAAK6T,MACZS,WAAYtU,KAAKsU,WACjBC,cAAevU,KAAKuU,cACpBzI,QAAS9L,KAAK8L,QACdmO,OAAQja,KAAKia,OACb7U,SAAUpF,KAAKoF,SACf8U,cAAela,KAAKka,gBAGtBlb,EAAAC,EAAAC,cAAC8b,EAAD,MACAhc,EAAAC,EAAAC,cAAC+b,GAAD,cAtPQpc,IAAMU,WCKJ2b,QACW,cAA7B9Z,OAAO+Z,SAASC,UAEe,UAA7Bha,OAAO+Z,SAASC,UAEhBha,OAAO+Z,SAASC,SAAS7F,MACvB,2DCXN8F,IAASC,OAIPtc,EAAAC,EAAAC,cAACqc,GAAD,MACArH,SAASsH,eAAe,SDqHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMzZ,KAAK,SAAA0Z,GACjCA,EAAaC,mCEnInBrd,EAAAC,QAAiBC,EAAAC,EAAuB","file":"static/js/main.7d37e72d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loading-64.0ad8b01c.svg\";","module.exports = __webpack_public_path__ + \"static/media/playall.8f22f49d.png\";","import React from 'react';\n\nconst context = React.createContext();\nexport default context;\n","import React from 'react';\nimport './Loading.less';\nimport LoadImg from './images/loading-64.svg';\n\nclass Loading extends React.Component {\n  render() {\n    return (\n      <div className=\"loading\">\n        <img src={LoadImg} alt=\"loading\"/>\n        {/* <i className=\"loading-icon\"></i> */}\n        {/* <p className=\"loading-text\">正在加载</p> */}\n      </div>\n    );\n  }\n}\n\nexport default Loading;","import React, { Component } from 'react';\nimport { SearchBar, List } from 'antd-mobile';\nimport { Transition } from 'react-transition-group';\nimport _ from 'lodash';\n\nimport PlayerContext from '../../context/PlayerContext';\nimport Loading from '../Loading/Loading';\nimport './Search.less';\n\nconst Item = List.Item;\nconst Brief = Item.Brief;\n\nclass Search extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      keyword: '',\n      hotKeywords: ['起风了', 'A妹新专辑', '有可能的夜晚', '出山', '流浪地球', 'Counting Sheep', '空心', '水星记', '东西', '梦龙'],\n      historyKeywords: [],\n      searchResult: [],\n      showSearchBox: false,\n      showSearchKeywordBox: false,\n      showSearchResultBox: false,\n      isLoading: false,\n    };\n  }\n\n  componentDidMount() {\n    const historyKeywords = window.localStorage.getItem('historyKeywords');\n    if (historyKeywords) {\n      this.setState({ historyKeywords: JSON.parse(historyKeywords) });\n    }\n  }\n\n  submit = (value) => {\n    if (value) {\n      \n      // set loading\n      this.setState({\n        showSearchKeywordBox: false,\n        showSearchResultBox: true,\n        isLoading: true,\n      });\n  \n      // set localstorage\n      const historyKws = this.state.historyKeywords;\n      let cpHistoryKws = [];\n      if (historyKws && historyKws.length) {\n        cpHistoryKws = historyKws.slice(0);\n        cpHistoryKws.push(value);\n      } else {\n        cpHistoryKws.push(value);\n      }\n      const uniqCpHistoryKws = _.uniq(cpHistoryKws);\n      window.localStorage.setItem('historyKeywords', JSON.stringify(uniqCpHistoryKws));\n      // console.log(cpHistoryKws);\n  \n      // req, url encode?\n      const searchApi = `https://api.mlwei.com/music/api/wy/?key=523077333&id=${value}&type=so&cache=1&nu=60`;\n      \n      const encoded = encodeURI(searchApi);\n      // console.log(encoded);\n      window.fetch(\n        encoded,\n        {\n          method: 'GET',\n          headers: {\n            'Accept': '*'\n          },\n          mode: 'cors'\n        }\n      ).then(\n        response => {\n          // console.log(response);\n          return response.status === 200 ? response.json() : {};\n        }\n      ).then(\n        data => {\n          // console.log('data',data);\n          let resultData = [];\n          if (data.Body) {\n            \n            resultData = data.Body.map(song => {\n              const { author, id, pic, title } = song;\n              return {\n                id: id,\n                link: `/song?id=${id}`,\n                name: title,\n                artists: [{name: author}],\n                album: {picUrl: pic}\n              };\n            });\n          }\n          // console.log('resultData',resultData);\n          this.setState({\n            historyKeywords: uniqCpHistoryKws,\n            searchResult: resultData,\n            isLoading: false,\n          });\n        }\n      ).catch(\n        reason => {\n          console.log(reason);\n          this.setState({\n            historyKeywords: cpHistoryKws,\n            isLoading: false,\n          });\n        }\n      );\n    }\n  }\n\n  change= (value) => {\n    this.setState({ keyword: value });\n  }\n\n  clear = () => {\n    // unshow result/ show search-keyword-box\n    this.setState({ keyword: '' });\n  }\n\n  focus = () => {\n    // show search-keyword-box\n    // console.log('focus');\n    this.setState({\n      showSearchBox: true,\n      showSearchKeywordBox: true,\n      showSearchResultBox: false,\n      isLoading: false,\n    });\n  }\n\n  cancel = () => {\n    // unshow search-keyword-box/result\n    this.setState({\n      keyword: '',\n      showSearchBox: false,\n      showSearchKeywordBox: false,\n      showSearchResultBox: false,\n      isLoading: false,\n    })\n  }\n\n  handlePlaySong = (ev, funcPlaySong, songIndex) => {\n    ev.stopPropagation();\n    funcPlaySong(_.cloneDeep(this.state.searchResult[songIndex]));\n  }\n\n  handleClickKeyword = (ev) => {\n    ev.stopPropagation();\n    // this.manualFocusInst.focus();\n    const val = ev.target.textContent;\n    // console.log(val);\n    if (ev.target.className === 'item') {\n      this.setState({ keyword: val });\n      this.submit(val);\n    }\n  }\n\n  clearHistoryKeywords = (ev) => {\n    ev.stopPropagation();\n    window.localStorage.removeItem('historyKeywords');\n    this.setState({ historyKeywords: [] });\n  }\n\n  render() {\n    const {\n      hotKeywords,\n      historyKeywords,\n      searchResult,\n      showSearchBox,\n      showSearchKeywordBox,\n      showSearchResultBox,\n      isLoading,\n    } =this.state;\n\n    return (\n      <PlayerContext.Consumer>\n        {({ playSong }) => {\n          let resultContent;\n          if (searchResult && searchResult.length) {\n            resultContent = searchResult.map((song, idx) => {\n      \n              const { id, name, artists } = song;\n        \n              return (\n                <Item \n                  key={id}\n                  className=\"result-list-item\"\n                  activeStyle={{ backgroundColor: '#ccc' }}\n                  onClick={(ev) => {this.handlePlaySong(ev, playSong, idx)}}\n                  multipleLine\n                >\n                  {name}\n                  <Brief>{artists.map(val => val.name).join('/')}</Brief>\n                </Item>\n              );\n            });\n      \n          } else {\n            resultContent = (\n              <div style={{height:'100vh',textAlign: 'center'}}>网络出了点问题</div>\n            );\n          }\n\n          return (\n            <div className=\"my-search\">\n              <SearchBar\n                ref={ref => this.manualFocusInst = ref}\n                value={this.state.keyword}\n                cancelText=\"返回\"\n                placeholder=\"Search\"\n                onSubmit={this.submit}\n                onChange={this.change}\n                onClear={this.clear}\n                onFocus={this.focus}\n                onBlur={() => console.log('onBlur')}\n                onCancel={this.cancel}\n              />\n              \n              {showSearchBox ? (\n                <div className=\"search-box\">\n                  {/* hot history */}\n                  <Transition\n                    in={showSearchKeywordBox}\n                    timeout={150}\n                    mountOnEnter\n                    unmountOnExit\n                    // onExited={() => this.setState({showSearchKeywordBox: false})}\n                  >\n                    {(status) => {\n                      return (\n                        <div\n                          className={`search-keyword-box fade fade-${status}`}\n                          onClick={(ev) => this.handleClickKeyword(ev)}\n                        >\n                          <div className=\"hot-keyword\">\n                            <h4 className=\"title\">热门搜索</h4>\n                            <ul>\n                              {hotKeywords.map((kw, idx) => (\n                                <li\n                                  key={idx}\n                                  className=\"item\"\n                                >\n                                  {kw}\n                                </li>\n                              ))}\n                            </ul>\n                          </div>\n                          {historyKeywords.length > 0 ? (\n                            <div className=\"history-keyword\">\n                              <h4 className=\"title\">\n                                搜索历史\n                                <i\n                                  className=\"delete-btn\"\n                                  onClick={(ev) => this.clearHistoryKeywords(ev)}\n                                ></i>\n                              </h4>\n                              <ul>\n                                {historyKeywords.map((kw, idx) => (\n                                  <li\n                                    key={idx}\n                                    className=\"item\"\n                                  >\n                                    {kw}\n                                  </li>\n                                ))}\n                              </ul>\n                            </div>\n                          ) : null}\n                        </div>\n                      );\n                    }}\n                  </Transition>\n\n                  {/* result */}\n                  <Transition\n                    in={showSearchResultBox}\n                    timeout={150}\n                    mountOnEnter\n                    unmountOnExit\n                    // onExited={() => this.setState({showSearchResultBox: false})}\n                  >\n                    {(status) => {\n                      return (\n                        <div className={`search-result-box fade fade-${status}`}>\n                          {isLoading ? (\n                            <Loading />\n                          ) : (\n                            <List>{resultContent}</List>\n                          )}\n                        </div>\n                      );\n                    }}\n                  </Transition>\n                  {/* loading */}\n                  {/* <Transition\n                    in={isLoading}\n                    timeout={150}\n                    mountOnEnter\n                    unmountOnExit\n                    onExited={() => this.setState({isLoading: false})}\n                  >\n                    {(status) => {\n                      return (\n                        <div className={`search-loading-box fade fade-${status}`}>\n                          <Loading />\n                        </div>\n                      );\n                    }}\n                  </Transition> */}\n                </div>\n              ) : null}\n\n            </div>\n            \n          );\n        }}\n      </PlayerContext.Consumer>\n    );\n  }\n}\n\nexport default Search;","import React, { Component } from 'react';\nimport BScroll from 'better-scroll';\n\nimport './Slide.less';\n\nclass Slide extends Component {\n  constructor(props) {\n    super(props)\n    \n    this.state = {\n      dots: [],\n      currentPageIndex: 0,\n    }\n    this.slideRef = React.createRef()\n    this.slideGroupRef = React.createRef()\n  }\n\n  componentDidMount() {\n    this.update()\n\n    window.addEventListener('resize', () => {\n      if (!this.slide || !this.slide.enabled) {\n        return\n      }\n      window.clearTimeout(this.resizeTimer)\n      this.resizeTimer = window.setTimeout(() => {\n        if (this.slide.isInTransition) {\n          this._onScrollEnd()\n        } else {\n          if (this.props.autoPlay) {\n            this._play()\n          }\n        }\n        this.refresh()\n      }, 60)\n    })\n  }\n  componentWillMount() {\n    // this.slide.disable()\n    window.clearTimeout(this.timer)\n  }\n  // methods: \n  update = () => {\n    if (this.slide) {\n      this.slide.destroy()\n    }\n    this.init()\n  }\n  refresh = () => {\n    this._setSlideWidth(true)\n    this.slide.refresh()\n  }\n  prev = () => {\n    this.slide.prev()\n  }\n  next = () => {\n    this.slide.next()\n  }\n  init = () => {\n    window.clearTimeout(this.timer)\n    this.setState({currentPageIndex: 0})\n    this._setSlideWidth()\n    if (this.props.showDot) {\n      this._initDots()\n    }\n    this._initSlide()\n    if (this.props.autoPlay) {\n      this._play()\n    }\n  }\n  _setSlideWidth = (isResize) => {\n    this.children = this.slideGroupRef.current.children\n    let width = 0\n    let slideWidth = this.slideRef.current.clientWidth\n    for (let i = 0; i < this.children.length; i++) {\n      let child = this.children[i]\n      this.addClass(child, 'slide-item')\n      child.style.width = slideWidth + 'px'\n      width += slideWidth\n    }\n    if (this.props.loop && !isResize) {\n      width += 2 * slideWidth\n    }\n    this.slideGroupRef.current.style.width = width + 'px'\n  }\n  _initSlide = () => {\n    // console.log(this.props.threshold)\n    this.slide = new BScroll(this.slideRef.current, {\n      scrollX: true,\n      scrollY: false,\n      momentum: false,\n      snap: {\n        loop: this.props.loop,\n        threshold: this.props.threshold,\n        speed: this.props.speed\n      },\n      bounce: false,\n      stopPropagation: true,\n      click: this.props.click\n    })\n    this.slide.on('scrollEnd', this._onScrollEnd)\n    this.slide.on('touchEnd', () => {\n      if (this.props.autoPlay) {\n        this._play()\n      }\n    })\n    this.slide.on('beforeScrollStart', () => {\n      if (this.props.autoPlay) {\n        window.clearTimeout(this.timer)\n      }\n    })\n  }\n  _onScrollEnd = () => {\n    let pageIndex = this.slide.getCurrentPage().pageX\n    this.setState({currentPageIndex: pageIndex})\n    if (this.autoPlay) {\n      this._play()\n    }\n  }\n  _initDots = () => {\n    let dots = new Array(this.children.length)\n    for (let idx = 0; idx < dots.length; idx++) {\n      dots[idx] = idx;\n    }\n    this.setState({dots: dots})\n  }\n  _play = () => {\n    window.clearTimeout(this.timer)\n    this.timer = window.setInterval(() => {\n      this.slide.next()\n    }, this.props.interval)\n  }\n  // common method dom\n  hasClass = (el, className) => {\n    let reg = new RegExp('(^|\\\\s)' + className + '(\\\\s|$)')\n    return reg.test(el.className)\n  }\n  \n  addClass = (el, className) => {\n    if (this.hasClass(el, className)) {\n      return\n    }\n  \n    let newClass = el.className.split(' ')\n    newClass.push(className)\n    el.className = newClass.join(' ')\n  }\n\n  render() {\n    const { dots, currentPageIndex } = this.state;\n\n    return (\n      <div className=\"slide\" ref={this.slideRef}>\n        <div className=\"slide-group\" ref={this.slideGroupRef}>\n          {this.props.children}\n        </div>\n        {this.props.showDot ? (\n          <div className=\"dots\">\n            {dots.map((val, idx) => (\n              <span\n                key={idx}\n                className={\n                  `dot ${currentPageIndex === idx ? 'active':''}`\n                }\n              ></span>\n            ))}\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nSlide.defaultProps = {\n  loop: true,\n  autoPlay: true,\n  interval: 4000,\n  showDot: true,\n  click: true,\n  threshold: 0.3,\n  speed: 400,\n}\n\nexport default Slide;","import React, { Component } from 'react';\nimport Slide from '../Slide/Slide';\n\nclass BannerSlider extends Component {\n  state = {\n    banners: [\n      'https://p1.music.126.net/PzonwsvcSEEsr-uhJXE2_g==/109951163871296308.jpg',\n      'https://p1.music.126.net/thHP6ooWw893Ccfk_iXG5w==/109951163866743145.jpg',\n      'https://p1.music.126.net/VO_0urbXu_PytHjhjfj4Zw==/109951163871298888.jpg',\n      'https://p1.music.126.net/kEGOOxh_p6H7UHKuOOFkFg==/109951163871789068.jpg',\n      'https://p1.music.126.net/wa7Oxq5yysZgGBvOlivwEg==/109951163871318124.jpg'\n    ]\n  }\n  render() {\n    const { banners } = this.state;\n\n    return (\n      <Slide>\n        {banners.map((val, idx) => (\n          <div key={idx}>\n            <img src={val} alt=\"banner\"/>\n          </div>\n        ))}\n      </Slide>\n    );\n  }\n}\n\nexport default BannerSlider;","import React from 'react';\n\nimport './PlaylistCover.less';\n\nclass PlaylistCover extends React.Component {\n  render() {\n    const { src, style, playCount } = this.props;\n\n    return (\n      <div className=\"pl-cover\" style={style}>\n        <img \n          className=\"cover\" \n          src={src}\n          alt=\"cover\"\n        />\n        <span className=\"u-earp play-num\">{playCount}</span>\n      </div>\n    );\n  }\n}\n\nexport default PlaylistCover;","import React from 'react';\r\nimport { NavBar, Icon, List, Result } from 'antd-mobile';\r\n// import BScroll from 'better-scroll';\r\nimport _ from 'lodash';\r\n\r\nimport PlayerContext from '../../context/PlayerContext';\r\nimport PlaylistCover from '../PlaylistCover/PlaylistCover.jsx';\r\nimport Loading from '../Loading/Loading.jsx';\r\n\r\nimport PlayIcon from './images/playall.png';\r\nimport './PlaylistDetail.less';\r\n\r\nconst Item = List.Item;\r\n\r\nclass PlaylistDetail extends React.Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      songlist: [],\r\n      isLoading: false,\r\n    };\r\n    this.SWrapperRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    // this.initScroll();\r\n    this.getSonglist();\r\n  }\r\n\r\n  // componentDidUpdate() {\r\n  //   this.refreshScroll();\r\n  // }\r\n\r\n  // componentWillUnmount() {\r\n  //   this.scroll && this.scroll.destroy();\r\n  // }\r\n  \r\n  // initScroll = () => {\r\n  //   if (!this.SWrapperRef.current) {\r\n  //     return;\r\n  //   }\r\n\r\n  //   this.scroll = new BScroll(this.SWrapperRef.current);\r\n  // }\r\n\r\n  // refreshScroll = () => {\r\n  //   this.scroll && this.scroll.refresh();\r\n  // }\r\n\r\n  // destroyScroll = () => {\r\n  //   this.scroll.destroy();\r\n  // }\r\n\r\n  getSonglist = () => {\r\n    this.setState({isLoading: true});\r\n\r\n    const searchApi = `https://api.mlwei.com/music/api/wy/?key=523077333&cache=1&type=songlist&id=${this.plId}`;\r\n\r\n    window.fetch(searchApi, {\r\n      method: 'GET',\r\n      headers: { 'Accept': '*' },\r\n      mode: 'cors'\r\n    }).then(response => {\r\n      // console.log(response);\r\n      return response.status === 200 ? response.json() : {};\r\n    }).then(data => {\r\n      // console.log('data',data);\r\n      let resultData = [];\r\n      if (data.Body) {\r\n        resultData = data.Body.map(song => {\r\n          const { id, title, author, pic } = song;\r\n          return {\r\n            id: id,\r\n            link: `/song?id=${id}`,\r\n            name: title,\r\n            artists: [{name: author}],\r\n            album: {picUrl: pic}\r\n          };\r\n        });\r\n      }\r\n      // console.log('resultData',resultData);\r\n      this.setState({\r\n        songlist: resultData,\r\n        isLoading: false,\r\n      });\r\n      \r\n    }).catch(reason => {\r\n      console.log(reason);\r\n      this.setState({isLoading: false});\r\n    });\r\n  }\r\n\r\n  handleClickPlayallOrAddall(funcPlayallOrAddall) {\r\n    const songlist = _.cloneDeep(this.state.songlist);\r\n    funcPlayallOrAddall(songlist);\r\n  }\r\n\r\n  handlePlaySong(ev, funcPlaySong, songIndex) {\r\n    ev.stopPropagation();\r\n    funcPlaySong(_.cloneDeep(this.state.songlist[songIndex]));\r\n  }\r\n\r\n  render() {\r\n    const { transitionClass, playlistIntro, toggleShowPlDetail } = this.props;\r\n    const { songlist, isLoading } = this.state;\r\n      \r\n    const {\r\n      id,\r\n      coverUrl,\r\n      name,\r\n      playCount,\r\n      author,\r\n    } = playlistIntro;\r\n\r\n    this.plId = id;\r\n    \r\n    return (\r\n      <PlayerContext.Consumer>\r\n        {({ playerState, playAll, playSong }) => {\r\n\r\n          const listContent = songlist.length && songlist.map((song, idx) => {\r\n            const {\r\n              id,\r\n              name,\r\n              artists,\r\n              album,\r\n            } = song;\r\n    \r\n            let artistsTitle = artists.map(artist => artist.name).join('/');\r\n    \r\n            return (\r\n              <Item \r\n                key={id}\r\n                className=\"mty-list-item\"\r\n                activeStyle={{\r\n                  backgroundColor: '#ccc'\r\n                }}\r\n                onClick={(ev) => {this.handlePlaySong(ev, playSong, idx)}}\r\n              >\r\n                <div className=\"s-index\">{idx + 1}</div>\r\n                <div className=\"s-detail-wrap\">\r\n                  <div className=\"s-info\">\r\n                    <div className=\"s-name f-thide\">\r\n                      {name}\r\n                    </div>\r\n                    <div className=\"s-artists-alb f-thide\">\r\n                      {artistsTitle} - {album.name}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Item>\r\n            );\r\n          });\r\n\r\n          {/* console.log('listContent',!(listContent)); */}\r\n\r\n          return (\r\n            <div className={`PlaylistDetail ${transitionClass}`}>\r\n              <div className=\"pld-navbar-wrapper\">\r\n                <NavBar\r\n                  icon={<Icon type=\"left\"/>}\r\n                  onLeftClick={toggleShowPlDetail}\r\n                >\r\n                  歌单\r\n                </NavBar>\r\n              </div>\r\n              \r\n              <div \r\n                // ref={this.SWrapperRef}\r\n                className=\"scroll-wrapper\"\r\n                style={playerState.playingList.length ? {paddingBottom: '56px'} : {paddingBottom: '0px'}}\r\n              >\r\n                <div className=\"scroll-content\">\r\n\r\n                  {/* info sec 可抽出为容器组件 */}\r\n                  <section className=\"my-plinfo-wrap\">\r\n                    <PlaylistCover\r\n                      src={`${coverUrl}?param=336y336`}\r\n                      style={{\r\n                        width: '1.12rem',\r\n                        height: '1.12rem',\r\n                      }}\r\n                      playCount={playCount}\r\n                    />\r\n\r\n                    {/* intro */}\r\n                    <div className=\"plinfo-right\">\r\n                      <h2 className=\"f-brk title\">\r\n                        {name}\r\n                      </h2>\r\n                      <div className=\"author f-thide\">\r\n                        {/* <div className=\"avatar\">\r\n                          <img src={author.avatarUrl} alt=\"ava\" />\r\n                        </div> */}\r\n                        {author.name}\r\n                      </div>\r\n                    </div>\r\n                  </section>\r\n                  \r\n                  {/* plyall btn */}\r\n                  <div className=\"playall-btn-wrapper\">\r\n                    <Item \r\n                      className=\"mty-list-item\"\r\n                      activeStyle={{\r\n                        backgroundColor: '#ddd'\r\n                      }}\r\n                      onClick={() => {this.handleClickPlayallOrAddall(playAll)}}\r\n                    > \r\n                      <div className=\"playall-btn\">\r\n                        <img \r\n                          src={PlayIcon} \r\n                          alt=\"playicon\"\r\n                        />\r\n                        <span>播放全部</span>\r\n                        <span className=\"song-num\">\r\n                          共({songlist.length})首\r\n                        </span>\r\n                      </div>\r\n                    </Item>\r\n                  </div>\r\n                  {/* song list */}\r\n                  <List className={listContent ? '':'no-content'}>\r\n                    {listContent ? listContent : (\r\n                      isLoading ? (\r\n                        <div className=\"loading-box\"><Loading /></div>\r\n                      ) : (\r\n                        <div className=\"result-box\"><Result title=\"网络开小差了\" /></div>\r\n                        \r\n                      )\r\n                    )}\r\n                  </List>\r\n\r\n                </div>\r\n              </div>\r\n\r\n              {/* 模糊背景 可抽出为组件 */}\r\n              <div className=\"bg-wrap\">\r\n                <div \r\n                  className=\"fullscreen-blur-bg\" \r\n                  style={{\r\n                    backgroundImage: `url(${coverUrl}?param=336y336)`\r\n                  }}\r\n                >\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        }}\r\n      </PlayerContext.Consumer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlaylistDetail;","import React from 'react';\r\nimport { List } from 'antd-mobile';\r\nimport { Transition } from 'react-transition-group';\r\n\r\nimport PlayerContext from '../../context/PlayerContext';\r\nimport './Home.less';\r\n\r\nimport Search from '../Search/Search';\r\nimport BannerSlider from '../BannerSlider/BannerSlider';\r\nimport PlaylistCover from '../PlaylistCover/PlaylistCover.jsx';\r\nimport PlaylistDetail from '../PlaylistDetail/PlaylistDetail.jsx';\r\n\r\nconst Item = List.Item;\r\nconst Brief = Item.Brief;\r\n\r\n// TODO: 无限加载\r\nclass Home extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = {\r\n      rcmdPlaylists: [\r\n        {\r\n          \"id\": 2406347748,\r\n          \"coverUrl\": \"http://p2.music.126.net/tkQ6Zb_eBdUsFAeD6PM-2A==/109951163547241213.jpg\",\r\n          \"name\": \"2018全美音乐奖提名名单（AMAs）\",\r\n          \"link\": \"/playlist?id=2406347748\",\r\n          \"playCount\": \"126万\",\r\n          \"author\": {\r\n            \"name\": \"DoubleRainbow_\",\r\n            \"homeLink\": \"/user/home?id=3226705\"\r\n          }\r\n        }, {\r\n          \"id\": 2439954234,\r\n          \"coverUrl\": \"http://p2.music.126.net/dBdq_Rs_pexuA8GqkZLcKA==/109951163599919632.jpg\",\r\n          \"name\": \"听首情歌说唱 | 做个甜甜的梦\",\r\n          \"link\": \"/playlist?id=2439954234\",\r\n          \"playCount\": \"211万\",\r\n          \"author\": {\r\n            \"name\": \"章若楠nn\",\r\n            \"homeLink\": \"/user/home?id=640698142\"\r\n          }\r\n        }, {\r\n          \"id\": 2497731034,\r\n          \"coverUrl\": \"http://p2.music.126.net/AtlN3uAvGczoL-xQN7FTtQ==/109951163643083559.jpg\",\r\n          \"name\": \"初恋糖配料表：你的马尾辫和衬衫味道\",\r\n          \"link\": \"/playlist?id=2497731034\",\r\n          \"playCount\": \"542万\",\r\n          \"author\": {\r\n            \"name\": \"驴子鬼\",\r\n            \"homeLink\": \"/user/home?id=246029257\"\r\n          }\r\n        }, {\r\n          \"id\": 2390539027,\r\n          \"coverUrl\": \"http://p2.music.126.net/8BZpZdDiDZatIiQMJnoKyg==/109951163736178562.jpg\",\r\n          \"name\": \"那些超带感的英文歌曲~『一秒沦陷』\",\r\n          \"link\": \"/playlist?id=2390539027\",\r\n          \"playCount\": \"351万\",\r\n          \"author\": {\r\n            \"name\": \"Mysterious-Box\",\r\n            \"homeLink\": \"/user/home?id=1558934331\"\r\n          }\r\n        }, {\r\n          \"id\": 2554253084,\r\n          \"coverUrl\": \"http://p2.music.126.net/mP8ulkyTDGmoj6jlZ_sblQ==/109951163722284832.jpg\",\r\n          \"name\": \"Future Bass丨醉寻心涧跳动的梦幻电子⚡️\",\r\n          \"link\": \"/playlist?id=2554253084\",\r\n          \"playCount\": \"61万\",\r\n          \"author\": {\r\n            \"name\": \"Kirin电子站\",\r\n            \"homeLink\": \"/user/home?id=1489420441\"\r\n          }\r\n        }, {\r\n          \"id\": 2312165875,\r\n          \"coverUrl\": \"http://p2.music.126.net/Cl0-NpZ0ESTDjJ1HmZ33KA==/109951163460576279.jpg\",\r\n          \"name\": \"100首华语民谣，因为懂得才有共鸣\",\r\n          \"link\": \"/playlist?id=2312165875\",\r\n          \"playCount\": \"1107万\",\r\n          \"author\": {\r\n            \"name\": \"情思天鹅\",\r\n            \"homeLink\": \"/user/home?id=108952364\"\r\n          }\r\n        }\r\n      ],\r\n      playlists: [],\r\n      showPlDetail: false,\r\n      clickedPl: {},\r\n    };\r\n    this.curPage = 0;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getPlaylists(this.curPage);\r\n  }\r\n\r\n  toggleShowPlDetail = () => {\r\n    this.setState(prevState => {\r\n      return { showPlDetail: !prevState.showPlDetail };\r\n    });\r\n  }\r\n\r\n  handleClickPlaylist = (ev) => {\r\n    // ev.stopPropagation();\r\n    const elem = ev.currentTarget;\r\n    // console.log(elem);\r\n    // console.log(ev.currentTarget.attributes);\r\n    // console.log(elem.hasAttribute('data-index'));\r\n\r\n    if (elem.hasAttribute('data-index')) {\r\n\r\n      const index = elem.getAttribute('data-index');\r\n      // console.log(index);\r\n      let pl = null;\r\n\r\n      this.setState(prevState => {\r\n        if (elem.getAttribute('data-plcate') === 'rcmd') {\r\n          pl = prevState.rcmdPlaylists[index];\r\n        } else {\r\n          pl = prevState.playlists[index];\r\n        }\r\n        return {\r\n          showPlDetail: true,\r\n          clickedPl: pl,\r\n        };\r\n      });\r\n    }\r\n  }\r\n\r\n  getPlaylists = (pageIndex) => {\r\n    const plsUrl = `${\r\n      process.env.PUBLIC_URL\r\n    }/api_mock_data/playlists/all/p${pageIndex}.json`;\r\n\r\n    window.fetch(plsUrl).then(\r\n      response => response.status === 200 ? response.json() : ''\r\n    ).then(\r\n      data => {\r\n        this.setState({ playlists: data });\r\n      }\r\n    ).catch(\r\n      reason => console.log(reason)\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { rcmdPlaylists, playlists, showPlDetail, clickedPl } =this.state;\r\n\r\n    // tuijian gedan\r\n    const rcmdlist = rcmdPlaylists.map((playlist, idx) => {\r\n      const {\r\n        id,\r\n        coverUrl,\r\n        name,\r\n        playCount,\r\n      } = playlist;\r\n\r\n      return (\r\n        <li\r\n          key={id}\r\n          className=\"pl-li\"\r\n          data-index={idx}\r\n          data-plcate=\"rcmd\"\r\n          onClick={(ev) => this.handleClickPlaylist(ev)}\r\n        >\r\n          <div className=\"cover-wrapper\">\r\n            <PlaylistCover\r\n              src={`${coverUrl}?param=400y400`}\r\n              style={{\r\n                position: 'absolute',\r\n                top: 0,\r\n                left: 0,\r\n              }}\r\n              playCount={playCount}\r\n            />\r\n          </div>\r\n          <p className=\"dec\">{name}</p>\r\n        </li>\r\n      );\r\n    });\r\n    //  quanbu gedan\r\n    const allPlContent = playlists && playlists.map((playlist, idx) => {\r\n      const {\r\n        id,\r\n        coverUrl,\r\n        name,\r\n        playCount,\r\n        author,\r\n      } = playlist;\r\n\r\n      return (\r\n        <Item\r\n          key={id}\r\n          thumb={`${coverUrl}?param=200y200`}\r\n          onClick={(ev) => this.handleClickPlaylist(ev)}\r\n          multipleLine\r\n          data-index={idx}\r\n          data-plcate=\"all\"\r\n        >\r\n          {name} <Brief>{`${author.name} · ${playCount}次播放`}</Brief>\r\n        </Item>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <PlayerContext.Consumer>\r\n        {({playerState}) => (\r\n          <React.Fragment>\r\n            <Search />\r\n            <div\r\n              className=\"playlists\"\r\n              style={playerState.playingList.length ? {paddingBottom: '56px'} : {paddingBottom: '0px'}}\r\n            >\r\n              <BannerSlider/>\r\n              <div key=\"cate\" className=\"pl-cat\">\r\n                推荐歌单\r\n              </div>\r\n              <ul\r\n                key=\"cvrlst\"\r\n                className=\"pl-cvrlst\"\r\n              >\r\n                {rcmdlist}\r\n              </ul>\r\n              {/* all pl */}\r\n              <List renderHeader={() => '全部歌单'}>\r\n                {allPlContent}\r\n              </List>\r\n            </div>\r\n\r\n            <Transition\r\n              in={showPlDetail}\r\n              timeout={150}\r\n              mountOnEnter\r\n              unmountOnExit\r\n            >\r\n              {(status) => {\r\n                return (\r\n                  <PlaylistDetail\r\n                    transitionClass={`slide-up slide-up-${status}`}\r\n                    playlistIntro={clickedPl}\r\n                    toggleShowPlDetail={this.toggleShowPlDetail}\r\n                  />\r\n                );\r\n              }}\r\n            </Transition>\r\n          </React.Fragment>\r\n        )}\r\n      </PlayerContext.Consumer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;\r\n","import React, { Component } from 'react';\nimport { List } from \"antd-mobile\";\n\nimport _ from 'lodash';\n\nimport CoverPlaceholder from '../../images/cover-placeholder.png';\nimport './MiniPlayer.less';\n\nconst Item = List.Item;\nconst Brief = Item.Brief;\n\nclass MiniPlayer extends Component {\n\n  render() {\n    let {\n      transitionClass,\n      curSong,\n      isPauseIcon,\n      clickPlayPauseHandler,\n      toggleFullplayer,\n      togglePlayingList,\n    } = this.props;\n\n    // play plp btns\n    const extraContent = (\n      <div className=\"miniplayer-btns-wrapper\">\n        <div \n          className={`btn ${isPauseIcon ? 'pause' : 'play'}-icon`}\n          onClick={clickPlayPauseHandler}\n        ></div>\n        <div\n          className=\"btn playlist-icon\"\n          onClick={togglePlayingList}\n        ></div>\n      </div>\n    );\n\n    let contentItem = null;\n\n    if (_.isEmpty(curSong)) {\n      contentItem = (\n        <Item\n          className=\"miniplayer-content\"\n          extra={extraContent}\n          multipleLine\n        >\n          听我想听的歌\n        </Item>\n      );\n    } else {\n      const {\n        name,\n        artists,\n        album,\n      } = curSong;\n  \n      // album cover \n      let imgSrc = '';\n      // 判断条件可能要改\n      if (album.picUrl && album.picUrl.length && album.picUrl.includes('http')) {\n        imgSrc = `${album.picUrl}`;\n      } else {\n        imgSrc = CoverPlaceholder;\n      }\n\n      contentItem = (\n        <Item\n          className=\"miniplayer-content\"\n          thumb={imgSrc}\n          extra={extraContent}\n          onClick={toggleFullplayer}\n          activeStyle={{ backgroundColor: '#fff'}}\n          multipleLine\n        >\n          {name}\n          <Brief>{artists.map(val => val.name).join('/')}</Brief>\n        </Item>\n      );\n    }\n\n    return (\n      <div className={`miniplayer ${transitionClass}`}>\n        {contentItem}\n      </div>\n    );\n  }\n}\n \nexport default MiniPlayer;","import React, { Component } from 'react'\nimport BScroll from 'better-scroll';\n\nimport './Scroll.less';\n\nclass Scroll extends Component {\n\n  SWrapperRef = React.createRef();\n\n  componentDidMount() {\n    this.initScroll();\n  }\n\n  componentWillUnmount() { this.scroll && this.scroll.destroy(); }\n  \n  initScroll = () => {\n    if (!this.SWrapperRef.current) { return; }\n    this.scroll = new BScroll(this.SWrapperRef.current, {click: true});\n  }\n\n  refreshScroll = () => { this.scroll && this.scroll.refresh(); }\n\n  destroyScroll = () => { this.scroll.destroy(); }\n  \n  scrollToElement() {\n    this.scroll && this.scroll.scrollToElement.apply(this.scroll, arguments)\n  }\n\n  render() {\n    const { style, className, children, ...restProps } = this.props;\n\n    return (\n      <div \n        ref={this.SWrapperRef}\n        style={style}\n        className={`scroll-wrapper ${className}`}\n        {...restProps}\n      >\n        {children}\n      </div>\n    );\n  }\n}\n\nexport default Scroll;","import React from 'react';\nimport { NavBar, Icon, Slider } from 'antd-mobile';\nimport { Transition } from 'react-transition-group';\nimport _ from 'lodash';\n\nimport PlayerContext from '../../context/PlayerContext';\nimport CoverPlaceholder from '../../images/cover-placeholder.png';\nimport './FullPlayer.less';\n\nimport Scroll from '../Scroll/Scroll.jsx';\n\nclass FullPlayer extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      // lyric: [],\n      // timestampArr: [],\n      showCover: true,\n      showLyric: false,\n      // progress: 0,\n    };\n    this.ScrollRef = React.createRef();\n    this.ProgressWrapRef = React.createRef();\n    this.ProgressBarRef = React.createRef();\n    \n    // this.songId = 0;\n    this.diffSong = true;\n    this.curLyricIndex = -1;\n    this.curLyricIndexChange = false;\n    this.isTouching = false;\n    this.progress = 0;\n  }\n\n  componentDidMount() {\n    // console.log('fullplayer mount');\n    const ProgressBarElem = this.ProgressBarRef.current;\n    this.progressBarWidth = ProgressBarElem.clientWidth;\n  }\n\n  componentDidUpdate() {\n    if (this.state.showLyric) {\n      \n      if (this.diffSong) {\n        this.ScrollRef.current.scrollToElement('p.sentence',1000,false,true);\n      } else {\n        if (this.curLyricIndexChange && this.curLyricIndex >= 5) {\n          this.ScrollRef.current.scrollToElement('p.is-curSentence',1000,false,true);\n        }\n      }\n    }\n  }\n  handleTouchStart = (ev, fnPlay, fnPause) => {\n    if (_.isEmpty(this.curSong)) { return; }\n\n    this.isTouching = true;\n\n    const target = ev.target;\n    // console.log(ev.type);\n    // console.log(ev.targetTouches);\n\n    const ProgressBarElem = this.ProgressBarRef.current;\n    // this.progressBarWidth = ProgressBarElem.clientWidth;\n    // console.log('progressBarWidth', this.progressBarWidth);\n    this.progressBarOffsetLeft = ProgressBarElem.offsetLeft;\n    // console.log('offsetLeft', this.progressBarOffsetLeft);\n    this.touchmoveLeftEdge = this.progressBarOffsetLeft - 8;\n    this.touchmoveRightEdge = this.progressBarOffsetLeft + this.progressBarWidth + 8;\n    // console.log(this.touchmoveLeftEdge, this.touchmoveRightEdge);\n\n    this.prevTouchX = ev.targetTouches[0].clientX;\n    // console.log('prevTouchX', this.prevTouchX);\n\n    const ProgressWrapElem = this.ProgressWrapRef.current;\n    // console.log(ProgressWrapElem.offsetWidth);\n    this.handleTouchEnd = this.handleTouchEnd.bind(this, fnPlay);\n    ProgressWrapElem.addEventListener('touchmove', this.handleTouchMove);\n    ProgressWrapElem.addEventListener('touchend', this.handleTouchEnd);\n\n    fnPause();\n  }\n\n  handleTouchMove = (ev) => {\n    // console.log(ev.type);\n    // console.log(ev.touches);\n    const nextTouchX = ev.touches[0].clientX;\n    // console.log('nextTouchX', nextTouchX);\n\n    if (this.touchmoveLeftEdge < nextTouchX && nextTouchX < this.touchmoveRightEdge) {\n      const deltaX = nextTouchX - this.prevTouchX;\n      this.prevTouchX = nextTouchX;\n      // console.log(deltaX);\n      let nextProgress = this.progress + deltaX;\n      if (nextProgress < 0) {\n        nextProgress = 0;\n      } else if (nextProgress > this.progressBarWidth) {\n        nextProgress = this.progressBarWidth;\n      }\n      this.progress = nextProgress;\n\n      this.props.updateCurrentTime((nextProgress / this.progressBarWidth));\n\n      // this.setState(prevState => {\n      //   let nextProgress = prevState.progress + deltaX;\n      //   if (nextProgress < 0) {\n      //     nextProgress = 0;\n      //   } else if (nextProgress > this.progressBarWidth) {\n      //     nextProgress = this.progressBarWidth;\n      //   }\n      //   return { progress: nextProgress };\n      // }, () => {this.props.updateCurrentTime((this.state.progress / this.progressBarWidth))});\n\n    }\n  }\n\n  handleTouchEnd(fnPlay, ev) {\n    // console.log(ev.type);\n    // console.log(ev.changedTouches);\n    this.isTouching = false;\n\n    const ProgressWrapElem = this.ProgressWrapRef.current;\n    ProgressWrapElem.removeEventListener('touchmove', this.handleTouchMove);\n    ProgressWrapElem.removeEventListener('touchend', this.handleTouchEnd);\n\n    fnPlay();\n  }\n\n  // getLyric = () => {\n  //   const lrcUrl = `https://api.mlwei.com/music/api/wy/?key=523077333&cache=1&type=lrc&id=${this.songId}`;\n  //   // console.log(lrcUrl);\n    \n  //   window.fetch(lrcUrl, {\n  //     method: 'GET',\n  //     headers: { 'Accept': '*' },\n  //     mode: 'cors'\n  //   }).then(\n  //     response => {\n  //       console.log(response);\n  //       return response.status === 200 ? response.text() : null;\n  //     }\n  //   ).then(\n  //     data => {\n  //       if (data) {\n          \n  //         // console.log(data);\n  //         const lrcArr = data.split('\\n');\n  //         // state\n  //         const \n  //           lyric = [],\n  //           timestampArr = [];\n  \n  //         lrcArr.forEach((lrc) => {\n  //           const matchPart = lrc.match(/\\[(.*)\\](.*)/);\n  \n  //           if (matchPart) {\n              \n  //             const \n  //               timestampParts = matchPart[1].trim().split(':'),\n  //               part1 = parseInt(timestampParts[0]) * 60,\n  //               part2 = parseFloat(timestampParts[1]),\n  //               timestamp = part1 + part2;\n              \n  //             if (!isNaN(timestamp)) {\n  //               lyric.push(matchPart[2].trim());\n  //               timestampArr.push(timestamp);\n  //             }\n  //           }\n  //         });\n  \n  //         console.log(lyric);\n  //         console.log(timestampArr);\n  \n  //         this.setState({\n  //           lyric: lyric,\n  //           timestampArr: timestampArr,\n  //           curLyricIndex: 0,\n  //         });\n  //       }\n  //     }\n  //   ).catch(\n  //     reason => {\n  //       console.log(reason);\n  //       this.setState({\n  //         lyric: [],\n  //         timestampArr: [],\n  //       });\n  //     }\n  //   );\n  // }\n\n  handleClickLyric = () => {\n    this.setState({\n      showCover: true,\n      showLyric: false,\n    });\n  }\n  handleClickCover = () => {\n    this.setState({\n      showCover: false,\n      showLyric: true,\n    });\n  }\n\n  render() {\n    // console.log('fullplayer render');\n    let {\n      transitionClass,\n      curSong,\n      diffSong,\n      playState,\n      mode,\n      clickPlayPauseHandler,\n      clickPrevBtnHandler,\n      clickNextBtnHandler,\n      clickModeBtnHandler,\n      // changeProgressHandler,\n      // afterChangeProgressHandler,\n      toggleFullplayer,\n      togglePlayingList,\n    } = this.props;\n\n    const {\n      // lyric,\n      // timestampArr,\n      showCover,\n      showLyric,\n      // progress,\n    } = this.state;\n\n    this.curSong = curSong;\n\n    if (_.isEmpty(curSong)) {\n      return (\n        <div className={`fullplayer ${transitionClass}`}>\n          <NavBar\n            className=\"my-fullplayer-navbar\"\n            icon={<Icon type=\"down\"/>}\n            onLeftClick={toggleFullplayer}\n          >\n            听我想听的歌\n          </NavBar>\n\n          <div className=\"mid-wrapper\">\n            <div className=\"cd-box\">\n              <div className=\"cd-wrapper\">\n                <div className=\"cd\">\n                  <img\n                    className=\"image\"\n                    src={CoverPlaceholder}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"background\"></div>\n        </div>\n      );\n    }\n\n    // else\n    const { id, name, artists, album} = curSong;\n\n    const {\n      duration,\n      curTime,\n      playProgress,\n      isPauseIcon,\n      lyric,\n      curLyricIndex,\n      curLyricIndexChange,\n    } = playState;\n\n    // this.diffSong = this.songId !== id;\n    // this.songId = id;\n    this.diffSong = diffSong;\n    this.curLyricIndex = curLyricIndex;\n    this.curLyricIndexChange = curLyricIndexChange;\n\n    const navBarTitleCnt = (\n      <div className=\"navbar-title-content\">\n        <p className=\"song-name f-thide\">{name}</p>\n        <p className=\"artists-name f-thide\">\n          - {artists.map(val => val.name).join('/')} -\n        </p>\n      </div>\n    );\n\n    // lyric\n    let \n      // curLyricIndex = 0,\n      lyricContent = null,\n      translateY = 0,\n      maxTranslateY = 0;\n\n    if (lyric.length) {\n      // curLyricIndex\n      // curLyricIndex = _.findLastIndex(timestampArr, val => val <= curTimestamp);\n      // this.curLyricIndexChange = this.curLyricIndex === curLyricIndex;\n      // this.curLyricIndex = curLyricIndex;\n      // lyricContent\n      lyricContent = lyric.map((val, idx) => {\n        const lrcCls = `sentence${\n          idx === curLyricIndex ? ' is-curSentence' : ''\n        }`;\n\n        const sentenceEl = (\n          <p \n            id={idx}\n            key={idx}\n            style={(val === '') ? {height: '18px'} : {}}\n            className={lrcCls}\n          >\n            {val}\n          </p>\n        );\n\n        return sentenceEl;\n      });\n\n      // 34px 为一行歌词的行高\n      translateY = (curLyricIndex <= 3) ? 0 : -(curLyricIndex - 3) * 40;\n      maxTranslateY =  -(lyric.length * 40);\n\n      if (translateY < maxTranslateY) {\n        translateY = maxTranslateY;\n      }\n    }\n\n    // album cover \n    let imgSrc = '';\n    // 判断条件可能要改\n    if (album.picUrl && album.picUrl.length && album.picUrl.includes('http')) {\n      imgSrc = `${album.picUrl}`;\n    } else {\n      imgSrc = CoverPlaceholder;\n    }\n\n    // playprogress\n    const playProgressWidth = this.progressBarWidth * parseFloat(playProgress);\n    this.progress = playProgressWidth;\n\n    return (\n      <PlayerContext.Consumer>\n        {({ play, pause }) => {\n\n          return (\n            <div className={`fullplayer ${transitionClass}`}>\n              <NavBar\n                className=\"my-fullplayer-navbar\"\n                icon={<Icon type=\"down\"/>}\n                onLeftClick={toggleFullplayer}\n              >\n                {navBarTitleCnt}\n              </NavBar>\n\n              {/* cd */}\n              <Transition\n                in={showCover}\n                timeout={100}\n                mountOnEnter\n                unmountOnExit\n              >\n                {(status) => {\n                  return (\n                    <div className={`mid-wrapper fade fade-${status}`}>\n                      <div\n                        className=\"cd-box\"\n                        onClick={() => this.handleClickCover()}\n                      >\n                        <div className=\"cd-wrapper\">\n                          <div className=\"cd\">\n                            <img\n                              className=\"image\"\n                              src={imgSrc}\n                            />\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                }}\n              </Transition>\n\n              {/* lyric */}\n              <Transition\n                in={showLyric}\n                timeout={100}\n                mountOnEnter\n                unmountOnExit\n              >\n                {(status) => {\n                  return (\n                    <Scroll\n                      ref={this.ScrollRef}\n                      className={`lyric-wrapper fade fade-${status}`}\n                      onClick={() => this.handleClickLyric()}\n                    >\n                      <div className=\"scroll-content\">\n                        {lyricContent ? (\n                          <div className=\"lyric\">\n                            {lyricContent}\n                          </div>\n                        ) : (\n                          <p className=\"no-lyric\">暂无歌词</p>\n                        )}\n                      </div>\n                    </Scroll>\n                  );\n                }}\n              </Transition>\n              \n              <div className=\"btm-wrapper\">\n                <div className=\"progress-wrapper\" ref={this.ProgressWrapRef}>\n\n                  <p className=\"time time-cur\">{curTime}</p>\n\n                  <div className=\"progress-bar-wrapper\">\n                    <div\n                      ref={this.ProgressBarRef}\n                      className=\"progress-bar\"\n                    >\n                      <div className=\"bar-inner\">\n                        <div\n                          className=\"progress\"\n                          style={{width: `${this.isTouching ? this.progress:playProgressWidth}px`}}\n                          // style={{width: `${playProgressWidth}px`}}\n                        ></div>\n                        <div\n                          className=\"progress-btn-wrapper\"\n                          style={{transform: `translate3d(${this.isTouching ? this.progress:playProgressWidth}px, 0px, 0px)`}}\n                          // style={{transform: `translate3d(${playProgressWidth}px, 0px, 0px)`}}\n                          onTouchStart={(ev) => this.handleTouchStart(ev, play, pause)}\n                        >\n                          <div className=\"progress-btn\"></div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  {/* <Slider\n                    style={{\n                      marginLeft: 12,\n                      marginRight: 12,\n                      paddingTop: 22,\n                      paddingBottom: 24,\n                    }}\n                    defaultValue={0}\n                    min={0}\n                    max={100}\n                    step={0.1}\n                    value={progress}\n                    handleStyle={{\n                      marginLeft: '-8px',\n                      marginTop: '-7px',\n                      width: '16px',\n                      height: '16px',\n                      border: 'none',\n                    }}\n                    trackStyle={{\n                      backgroundColor: '#31c27c'\n                    }}\n                    railStyle={{\n                      backgroundColor: 'rgba(225,225,225, 0.4)'\n                    }}\n                    onChange={(value) => {\n                      pause();\n                      changeProgressHandler(value);\n                    }}\n                    onAfterChange={(curVal) => {\n                      afterChangeProgressHandler(curVal);\n                      playByIndex(curSongIndex);\n                    }}\n                  /> */}\n\n                  <p className=\"time time-dur\">{duration}</p>\n                </div>\n\n                <div className=\"operators\">\n                  <div\n                    className={`btn ${mode}-icon`}\n                    onClick={clickModeBtnHandler}\n                  ></div>\n                  <div\n                    className=\"btn prev-icon\"\n                    onClick={clickPrevBtnHandler}\n                  ></div>\n                  <div\n                    className={`btn ${isPauseIcon ? 'pause' : 'play'}-icon`}\n                    onClick={clickPlayPauseHandler}\n                  ></div>\n                  <div\n                    className=\"btn next-icon\"\n                    onClick={clickNextBtnHandler}\n                  ></div>\n                  <div\n                    className=\"btn list-icon\"\n                    onClick={togglePlayingList}\n                  ></div>\n                </div>\n              </div>\n\n              <div className=\"background\">\n                <img \n                  width=\"100%\"\n                  height=\"100%\"\n                  src={imgSrc}\n                />\n              </div>\n            </div>\n\n          );\n        }}\n      </PlayerContext.Consumer>\n    );\n  }\n}\n\nexport default FullPlayer;","import React from 'react';\nimport { List } from 'antd-mobile';\n\nimport PlayerContext from '../../context/PlayerContext';\n\nimport './PlayingList.less';\n\nconst Item = List.Item;\n\nclass PlayingList extends React.Component {\n\n  componentDidMount() {\n    window.document.querySelector('.playing-list .active-song').scrollIntoView();\n  }\n  \n  render() {\n    const { transitionClass, togglePlayingList } = this.props;\n    \n    return (\n      <PlayerContext.Consumer>\n        {({ playerState, playByIndex, deleteSong, clearPlaylist }) => {\n          const {\n            playingList,\n            curSongIndex,\n          } = playerState;\n\n          const extraClearBtn = (\n            <div\n              className=\"btn delete-icon\"\n              onClick={() => clearPlaylist()}\n            ></div>\n          );\n\n          const listItemArr = playingList.map((song, idx) => {\n            const {\n              id,\n              name,\n              artists,\n            } = song;\n    \n            const extraCloseBtn = (\n              <div\n                className=\"btn close-icon\"\n                onClick={(ev) => {\n                  ev.stopPropagation();\n                  deleteSong(idx);\n                }}\n              ></div>\n            );\n\n            return (\n              <Item \n                key={id}\n                className={`${curSongIndex === idx ? 'active-song' : ''}`}\n                extra={extraCloseBtn}\n                onClick={() => playByIndex(idx)}\n              >\n                {name}\n                <span className=\"song-artists-alb\">\n                  {' - ' + artists.map(val => val.name).join('/')}\n                </span>\n              </Item>\n            );\n          });\n\n          return (\n            <div \n              className={`playing-list ${transitionClass}`}\n              onTouchStart={(ev) => ev.stopPropagation()}\n            >\n              <Item\n                extra={extraClearBtn}\n                multipleLine\n              >\n                播放列表\n                <span className=\"song-num\">\n                  共({playingList.length})首\n                </span>\n              </Item>\n              <List>\n                {listItemArr}\n              </List>\n              <Item\n                className=\"close-btn\"\n                onClick={togglePlayingList}\n                multipleLine\n              >\n                关闭\n              </Item>\n            </div>\n          );\n        }}\n      </PlayerContext.Consumer>\n    );\n  }\n}\n\nexport default PlayingList;","import React from 'react';\nimport { Transition } from 'react-transition-group';\n\nimport _ from 'lodash';\n\nimport PlayerContext from '../../context/PlayerContext';\nimport MiniPlayer from '../MiniPlayer/MiniPlayer.jsx';\nimport FullPlayer from '../FullPlayer/FullPlayer.jsx';\nimport PlayingList from '../PlayingList/PlayingList.jsx';\n\n// import './Player.less';\n\nclass Player extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      modeIndex: 0,\n      duration: '00:00',\n      curTime: '00:00',\n      playProgress: '0',\n      // 歌词相关\n      // curTimestamp: 0, \n      lyric: [],\n      timestampArr: [],\n      curLyricIndex: -1,\n      curLyricIndexChange: false,\n      isPauseIcon: false,\n      // showMiniplayer: false,\n      showFullplayer: false,\n      showPlayingList: false,\n    };\n    this.audioRef = React.createRef();\n    // this.handleChangeProgress = this.handleChangeProgress.bind(this);\n    // this.handleAfterChangeProgress = this.handleAfterChangeProgress.bind(this);\n\n    this.songId = 0; // lyric\n    this.diffSong = false; // lyric\n    this.curSongIndex = -1;\n    this.audioAmount = 0;\n    this.isPause = true; // 指示 进行播放还是暂停\n    this.songUrlApi = 'https://music.163.com/song/media/outer/url?id='; // ?id=350909 会返回一个重定向响应\n    this.currentSong = {};\n\n    this.playMode = [\n      {\n        desc: '列表循环',\n        className: 'loop',\n      },\n      {\n        desc: '单曲循环',\n        className: 'single',\n      },\n      {\n        desc: '随机播放',\n        className: 'random',\n      }\n    ];\n  }\n\n  componentDidMount() {\n    // console.log('player mount');\n    // this.getLyric();\n  }\n\n  componentDidUpdate() {\n    // console.log('player Update');\n    if (this.isNoAudio()) {\n      return;\n    }\n    if (this.isPause) {\n      if (!(this.audioRef.current.paused)) {\n        this.pauseAudio();\n      }\n    } else {\n      if (this.audioRef.current.paused) {\n        this.playAudio();\n      }\n    }\n    // lyric\n    // console.log(this.diffSong);\n    if (this.diffSong) {\n      this.getLyric();\n    }\n  }\n\n  getLyric = () => {\n    const lrcUrl = `https://api.mlwei.com/music/api/wy/?key=523077333&cache=1&type=lrc&id=${this.songId}`;\n    console.log(lrcUrl);\n    \n    window.fetch(lrcUrl, {\n      method: 'GET',\n      headers: { 'Accept': '*' },\n      mode: 'cors'\n    }).then(\n      response => {\n        // console.log(response);\n        return response.status === 200 ? response.text() : null;\n      }\n    ).then(\n      data => {\n        if (data) {\n          \n          // console.log(data);\n          const lrcArr = data.split('\\n');\n          // state\n          const \n            lyric = [],\n            timestampArr = [];\n  \n          lrcArr.forEach((lrc) => {\n            const matchPart = lrc.match(/\\[(.*)\\](.*)/);\n  \n            if (matchPart) {\n              \n              const \n                timestampParts = matchPart[1].trim().split(':'),\n                part1 = parseInt(timestampParts[0]) * 60,\n                part2 = parseFloat(timestampParts[1]),\n                timestamp = part1 + part2;\n              \n              if (!isNaN(timestamp)) {\n                lyric.push(matchPart[2].trim());\n                timestampArr.push(timestamp);\n              }\n            }\n          });\n  \n          console.log(lyric);\n          // console.log(timestampArr);\n  \n          this.setState({\n            lyric: lyric,\n            timestampArr: timestampArr,\n            curLyricIndex: -1,\n          });\n        }\n      }\n    ).catch(\n      reason => {\n        // console.log(reason);\n        this.setState({\n          lyric: [],\n          timestampArr: [],\n        });\n      }\n    );\n  }\n\n  playAudio() {\n    this.audioRef.current.play().then(() => {\n      // console.log('play.then');\n      this.setState({ isPauseIcon: true });\n    }, (reason) => {\n      console.log(reason);\n    });\n  }\n\n  pauseAudio() {\n    this.audioRef.current.pause();\n    this.setState({ isPauseIcon: false });\n  }\n\n  handleClickPlayPause(ev, funcPlay, funcPause) {\n    ev.stopPropagation();\n    if (this.isNoAudio()) {\n      return;\n    }\n    if (this.audioRef.current.paused) {\n      const index = this.curSongIndex;\n      funcPlay(index);\n    } else {\n      funcPause();\n    }\n  }\n\n  handleClickPrevBtn(funcPlay) {\n    if (this.isNoAudio()) {\n      return;\n    }\n    this.setState({ playProgress: '0' });\n    const index = this.getIndex(true);\n    funcPlay(index);\n  }\n\n  handleClickNextBtn(funcPlay) {\n    if (this.isNoAudio()) {\n      return;\n    }\n    this.setState({ playProgress: '0' });\n    const index = this.getIndex();\n    funcPlay(index);\n  }\n\n  handleClickModeBtn() {\n    if (this.isNoAudio()) {\n      return;\n    }\n    const nextIndex = (this.state.modeIndex + 1) % this.playMode.length;\n\n    this.audioRef.current.loop = nextIndex === 1;\n    this.setState({ modeIndex: nextIndex });\n  }\n\n  // handleChangeProgress(value) {\n  //   if (this.isNoAudio()) {\n  //     return;\n  //   }\n  //   const\n  //     prevCurTime = this.state.curTime,\n  //     duration = this.audioRef.current.duration;\n\n  //   const\n  //     curTimeStr = this.timeFormat(parseFloat((value / 100 * duration).toFixed(6))),\n  //     progress = `${value}%`;\n\n  //     if (prevCurTime !== curTimeStr) {\n  //       this.setState({\n  //         curTime: curTimeStr,\n  //         playProgress: progress,\n  //       });\n  //     } else {\n  //       this.setState({ playProgress: progress });\n  //     }\n  // }\n\n  // handleAfterChangeProgress(value) {\n  //   if (this.isNoAudio()) {\n  //     return;\n  //   }\n  //   const audio = this.audioRef.current;\n  //   audio.currentTime = parseFloat((value / 100 * audio.duration).toFixed(6));\n  // }\n\n  toggleFullplayer = () => {\n    this.setState(state => ({\n      showFullplayer: !state.showFullplayer\n    }));\n  }\n\n  togglePlayingList = (ev) => {\n    ev.stopPropagation();\n    this.setState(state => ({\n      showPlayingList: !state.showPlayingList\n    }));\n  }\n  \n  // audio\n  handleDurationChange() {\n    // console.log('handleDurationChange');\n    this.setState({\n      duration: this.timeFormat(this.audioRef.current.duration),\n      playProgress: '0',\n      curTime: '00:00'\n    });\n  }\n  // use by fullplayer\n  updateCurrentTime = (playPercentage) => {\n    const \n      audioElem = this.audioRef.current,\n      duration = audioElem.duration;\n      \n    audioElem.currentTime = duration * playPercentage;\n  }\n\n  handleTimeUpdate() {\n    const\n      { curTime, curLyricIndex, timestampArr } = this.state,\n      { duration, currentTime } = this.audioRef.current;\n    \n    const\n      nextCurTime = this.timeFormat(currentTime),\n      nextPlayProgress = `${(currentTime / duration).toFixed(3)}`,\n      // nextPlayProgress = `${(currentTime / duration * 100).toFixed(2)}%`,\n      nextCurLyricIndex = _.findLastIndex(timestampArr, val => val <= currentTime);\n  \n    if (curTime !== nextCurTime) {\n      this.setState({\n        curTime: nextCurTime,\n        playProgress: nextPlayProgress,\n      });\n    } else if (currentTime === duration) {\n      this.setState({\n        playProgress: nextPlayProgress\n      });\n    }\n    // lyric\n    if (curLyricIndex !== nextCurLyricIndex) {\n      this.setState({\n        curLyricIndex: nextCurLyricIndex,\n        curLyricIndexChange: true,\n      });\n    } else {\n      this.setState({\n        curLyricIndexChange: false,\n      });\n    }\n  }\n\n  handleEnded(funcPlay) {\n    const index = this.getIndex();\n    this.setState({ loadProgress: '0', playProgress: '0' });\n    funcPlay(index);\n  }\n\n  handleAudioError() {\n    const audioElem = this.audioRef.current;\n    console.log(audioElem.error);\n    \n    // TODO 完善无版权歌曲处理\n    if (audioElem.error.code === 2) {\n      audioElem.load();\n      audioElem.currentTime = parseFloat(this.state.playProgress) / 100;\n      // console.log(this.state.playProgress);\n    }\n  }\n\n  // Util\n  isNoAudio() {\n    return (this.audioAmount === 0);\n  }\n\n  timeFormat(timeNum) {// mm:ss\n    const minutes = parseInt(`${timeNum / 60}`),  // 商\n          seconds = parseInt(`${timeNum % 60}`),  // 余数\n          minStr = minutes < 10 ? `0${minutes}` : `${minutes}`,\n          secStr = seconds < 10 ? `0${seconds}` : `${seconds}`;\n\n    return `${minStr}:${secStr}`;\n  }\n\n  getIndex(isPrev) {\n    if (isPrev === undefined) {\n      isPrev = false;\n    }\n    let index = 0;\n    switch (this.state.modeIndex) {\n      case 0:\n      case 1:\n        if (isPrev) {\n          index = (\n              this.curSongIndex - 1 + this.audioAmount\n            ) % this.audioAmount;\n        } else {\n          index = (this.curSongIndex + 1) % this.audioAmount;\n        }\n        break;\n      case 2:\n        index = parseInt(Math.random() * this.audioAmount);\n        break;\n      default:\n        break;\n    }\n    return index;\n  }\n\n  render() {\n    // console.log('player render');\n    const { showFullplayer, showPlayingList } = this.state;\n\n    return (\n      <PlayerContext.Consumer>\n        {({ playerState, playByIndex, pause }) => {\n          const {\n            playingList,\n            currentSong,\n            curSongIndex,\n            isPause,\n          } = playerState;\n          \n          const curSongId = currentSong.id;\n          {/* console.log(curSongId); */}\n          if (curSongId) {\n            this.diffSong = this.songId !== curSongId;\n            this.songId = curSongId;\n          }\n          this.curSongIndex = curSongIndex;\n          this.audioAmount = playingList.length;\n          this.isPause = isPause;\n          this.currentSong = currentSong;\n          this.isToReset = _.isEmpty(currentSong);\n\n          return (\n            <div className=\"audio-controls-panel\">\n              {/* music */}\n              <audio \n                ref={this.audioRef}\n                src={\n                  currentSong && currentSong.link ? `${this.songUrlApi}${currentSong.id}` : ''\n                }\n                onDurationChange={() => this.handleDurationChange()}\n                onTimeUpdate={() => this.handleTimeUpdate()}\n                onEnded={() => this.handleEnded(playByIndex)}\n                onError={() => this.handleAudioError()}\n              >\n              </audio>\n              \n              {/* mini full都用transition 包裹，currentSong为空时，做退出的效果。\n              且各自内部也对currentSong为空的情况做处理。 */}\n              <Transition\n                in={!this.isToReset}\n                timeout={150}\n                mountOnEnter\n                unmountOnExit\n              >\n                {(status) => {\n                  return (\n                    <MiniPlayer\n                      transitionClass={`slide-up slide-up-${status}`}\n                      curSong={currentSong}\n                      isPauseIcon={this.state.isPauseIcon}\n                      clickPlayPauseHandler={(ev) => this.handleClickPlayPause(ev, playByIndex, pause)}\n                      toggleFullplayer={this.toggleFullplayer}\n                      togglePlayingList={(ev) => this.togglePlayingList(ev)}\n                    />\n                  );\n                }}\n              </Transition>\n          \n              <Transition\n                in={this.isToReset ? false : showFullplayer}\n                timeout={250}\n                mountOnEnter\n                unmountOnExit\n                onExited={() => this.setState({showFullplayer: false})}\n              >\n                {(status) => {\n                  return (\n                    <FullPlayer\n                      transitionClass={`slide-up slide-up-${status}`}\n                      curSong={currentSong}\n                      diffSong={this.diffSong}\n                      playState={this.state}\n                      mode={this.playMode[this.state.modeIndex].className}\n                      clickPlayPauseHandler={(ev) => this.handleClickPlayPause(ev, playByIndex, pause)}\n                      clickPrevBtnHandler={() => this.handleClickPrevBtn(playByIndex)}\n                      clickNextBtnHandler={() => this.handleClickNextBtn(playByIndex)}\n                      clickModeBtnHandler={() => this.handleClickModeBtn()}\n                      changeProgressHandler={this.handleChangeProgress}\n                      afterChangeProgressHandler={this.handleAfterChangeProgress}\n                      toggleFullplayer={this.toggleFullplayer}\n                      togglePlayingList={(ev) => this.togglePlayingList(ev)}\n                      updateCurrentTime={this.updateCurrentTime}\n                    />\n                  );\n                }}\n              </Transition>\n              \n              {/* plp */}\n              <Transition\n                in={this.isToReset ? false : showPlayingList}\n                timeout={250}\n                mountOnEnter\n                unmountOnExit\n                onExited={() => this.setState({showPlayingList: false})}\n              >\n                {(status) => {\n                  return (\n                    <PlayingList\n                      transitionClass={`slide-up slide-up-${status}`}\n                      listData={playingList}\n                      curSongIndex={curSongIndex}\n                      togglePlayingList={(ev) => this.togglePlayingList(ev)}\n                    />\n                  );\n                }}\n              </Transition>\n            </div>\n          );\n        }}\n      </PlayerContext.Consumer>\n    );\n  }\n}\n\nexport default Player;","import React from 'react';\r\nimport l_array from 'lodash/array';\r\n\r\nimport PlayerContext from './context/PlayerContext';\r\nimport Home from './components/Home/Home.jsx';\r\nimport Player from './components/Player/Player.jsx';\r\n\r\nclass App extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      playingList: [],\r\n      currentSong: {},\r\n      curSongIndex: -1,\r\n      isPause: true,\r\n      isLogin: false\r\n    };\r\n    // bind this to method\r\n    this.playByIndex = this.playByIndex.bind(this);\r\n    // this.pause = this.pause.bind(this);\r\n    this.deleteSong = this.deleteSong.bind(this);\r\n    this.clearPlaylist = this.clearPlaylist.bind(this);\r\n    this.playAll = this.playAll.bind(this);\r\n    this.addAll = this.addAll.bind(this);\r\n    this.playSong = this.playSong.bind(this);\r\n    this.addSongToNext = this.addSongToNext.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // console.log('app mount');\r\n    const localData = window.localStorage.getItem('playData');\r\n    this.setState(JSON.parse(localData));\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { playingList, currentSong, curSongIndex } = this.state;\r\n    window.localStorage.setItem('playData',JSON.stringify({ playingList, currentSong, curSongIndex }));\r\n  }\r\n\r\n  playByIndex(index) {\r\n    if (index >= 0) {\r\n      if (index === this.state.curSongIndex) {\r\n        if (this.state.isPause) {\r\n          this.setState({ isPause: false });\r\n        }\r\n      } else {\r\n        this.setState({\r\n          currentSong: this.state.playingList[index],\r\n          curSongIndex: index,\r\n          isPause: false,\r\n        });\r\n      } \r\n    }\r\n  }\r\n\r\n  play = () => {\r\n    this.setState({ isPause: false });\r\n  }\r\n  pause = () => {\r\n    this.setState({ isPause: true });\r\n  }\r\n\r\n  // 删除歌曲\r\n  deleteSong(songIndex) {\r\n    const appState = this.state;\r\n\r\n    const playingList = appState.playingList;\r\n    let curSongIndex = appState.curSongIndex;\r\n\r\n    l_array.remove(playingList, (val, idx) => idx === songIndex);\r\n\r\n    if (playingList.length) {\r\n      \r\n      if (songIndex < curSongIndex) {\r\n        this.setState({\r\n          playingList: playingList,\r\n          curSongIndex: curSongIndex - 1,\r\n        });\r\n      } else if (songIndex === curSongIndex) {\r\n\r\n        curSongIndex = songIndex === playingList.length ? 0 : songIndex;\r\n\r\n        this.setState({\r\n          playingList: playingList,\r\n          currentSong: playingList[curSongIndex],\r\n          curSongIndex: curSongIndex,\r\n          isPause: false,\r\n        });\r\n      } else {\r\n        this.setState({ playingList: playingList });\r\n      }\r\n      \r\n    } else {\r\n      this.clearPlaylist();\r\n    }\r\n  }\r\n\r\n  clearPlaylist() {\r\n    this.setState({\r\n      playingList: [],\r\n      currentSong: {},\r\n      curSongIndex: -1,\r\n      isPause: true,\r\n    });\r\n  }\r\n\r\n  playAll(songlist) {\r\n    this.setState({\r\n      playingList: songlist,\r\n      curSongIndex: -1,\r\n    }, () => this.playByIndex(0));\r\n  }\r\n\r\n  addAll(songlist) {\r\n    const playingList = this.state.playingList;\r\n\r\n    if (playingList.length) {\r\n\r\n      // 歌单间重复的歌曲也被去重了\r\n      const songToAdd = l_array.differenceBy(songlist, playingList, 'id');\r\n      // console.log(songToAdd);\r\n\r\n      if (songToAdd.length) {\r\n        // 这一行直接以非 setState 的方式对 this.state 做了修改\r\n        playingList.splice(this.state.curSongIndex + 1, 0, ...songToAdd);\r\n        // 这一行只是单纯地要触发 render\r\n        this.setState({ playingList: playingList });\r\n      }\r\n    } else {\r\n      this.playAll(songlist);\r\n    }\r\n  }\r\n  // 添加并播放单首歌曲\r\n  playSong(song) {\r\n    const appState = this.state;\r\n    const playingList = appState.playingList;\r\n    const curSongIndex = appState.curSongIndex;\r\n    const indexToInsert = curSongIndex + 1;\r\n\r\n    if (playingList.length) {// 播放列表不为空\r\n\r\n      const matchedSongIdx = l_array.findIndex(playingList, ['id', song.id]);\r\n  \r\n      // 已有这首歌\r\n      if (matchedSongIdx !== -1) {\r\n        \r\n        if (matchedSongIdx === curSongIndex) {// 且为正在播放的歌\r\n          // 直接播放这首歌\r\n          this.playByIndex(matchedSongIdx);\r\n\r\n        } else if (matchedSongIdx < curSongIndex) {// 在正在播放的歌之前\r\n          // 添加到正播放的歌的后面\r\n          playingList.splice(indexToInsert, 0, song);\r\n          // 从原位置移除\r\n          playingList.splice(matchedSongIdx, 1);\r\n          // 更新 ui\r\n          this.setState({\r\n            playingList: playingList,\r\n            curSongIndex: curSongIndex - 1,\r\n          }, () => this.playByIndex(indexToInsert - 1));\r\n\r\n        } else {// 在正在播放的歌之后\r\n          // 从原位置移除\r\n          playingList.splice(matchedSongIdx, 1);\r\n          // 添加到正播放的歌的后面\r\n          playingList.splice(indexToInsert, 0, song);\r\n          // 更新 ui\r\n          this.setState({ playingList: playingList }, () => this.playByIndex(indexToInsert));\r\n        }\r\n\r\n      } else {// 没有这首歌\r\n        // 添加到正播放的歌的后面\r\n        playingList.splice(indexToInsert, 0, song);\r\n        // console.log(playingList);\r\n        // 更新 ui\r\n        this.setState({ playingList: playingList }, () => this.playByIndex(indexToInsert));\r\n      }\r\n\r\n    } else {// 播放列表为空\r\n      this.setState({ playingList: [song] }, () => this.playByIndex(indexToInsert));\r\n    }\r\n  }\r\n  // 下一首播放\r\n  addSongToNext(song) {\r\n    const appState = this.state;\r\n    const playingList = appState.playingList;\r\n    const curSongIndex = appState.curSongIndex;\r\n    const indexToInsert = curSongIndex + 1;\r\n\r\n    if (playingList.length) {// 播放列表不为空\r\n\r\n      const matchedSongIdx = l_array.findIndex(playingList, ['id', song.id]);\r\n  \r\n      // 已有这首歌\r\n      if (matchedSongIdx !== -1) {\r\n        \r\n        if (matchedSongIdx === curSongIndex) {// 且为正在播放的歌\r\n          // 直接播放这首歌\r\n          this.playByIndex(matchedSongIdx); \r\n\r\n        } else if (matchedSongIdx < curSongIndex) {// 在正在播放的歌之前\r\n          // 添加到正播放的歌的后面\r\n          playingList.splice(indexToInsert, 0, song);\r\n          // 从原位置移除\r\n          playingList.splice(matchedSongIdx, 1);\r\n          // 更新 ui\r\n          this.setState({\r\n            playingList: playingList,\r\n            curSongIndex: curSongIndex - 1,\r\n          });\r\n\r\n        } else {// 在正在播放的歌之后\r\n          // 从原位置移除\r\n          playingList.splice(matchedSongIdx, 1);\r\n          // 添加到正播放的歌的后面\r\n          playingList.splice(indexToInsert, 0, song);\r\n          // 更新 ui\r\n          this.setState({ playingList: playingList });\r\n        }\r\n\r\n      } else {// 没有这首歌\r\n        // 添加到正播放的歌的后面\r\n        playingList.splice(indexToInsert, 0, song);\r\n        // 更新 ui\r\n        this.setState({ playingList: playingList });\r\n      }\r\n\r\n    } else {// 播放列表为空\r\n      this.setState({ playingList: [song] }, () => this.playByIndex(0));\r\n    }\r\n\r\n  }\r\n  // render\r\n  render() {\r\n    // console.log('app render');\r\n    return (\r\n      \r\n        <PlayerContext.Provider \r\n          value={{\r\n            playerState: this.state,\r\n            playByIndex: this.playByIndex,\r\n            play: this.play,\r\n            pause: this.pause,\r\n            deleteSong: this.deleteSong,\r\n            clearPlaylist: this.clearPlaylist,\r\n            playAll: this.playAll,\r\n            addAll: this.addAll,\r\n            playSong: this.playSong,\r\n            addSongToNext: this.addSongToNext,\r\n          }}\r\n        >\r\n          <Home />\r\n          <Player />\r\n          \r\n        </PlayerContext.Provider>\r\n      \r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import { BrowserRouter } from 'react-router-dom';\nimport './index.less';\nimport App from './App.jsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  // <BrowserRouter>\n  //   <App />\n  // </BrowserRouter>,\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/cover-placeholder.d45643b2.png\";"],"sourceRoot":""}